"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[790],{17790:function(e,t,r){r.d(t,{Z:function(){return Jt}});var n=r(34051),a=r.n(n),i=r(27646),o=r(9669),u=r.n(o),c=r(18405),s=r(48834).Buffer,l=function(e,t){return"https://services.f-ck.me/v1/image/".concat(btoa(e).replace(/\+/g,"-").replace(/\//g,"_"),"?host=").concat(t)},d=r(59017);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var a=f(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h(this,r)}}var b,y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(r,e);var t=g(r);function r(){var e;return p(this,r),(e=t.apply(this,arguments)).getMangaInternalURL=function(t){return"/".concat(e.id,"/").concat(t)},e.getChapterInternalURL=function(t,r){return"/".concat(e.id,"/").concat(t,"/").concat(r)},e}return r}(d.Source);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.EVERYONE="EVERYONE",e.MATURE="MATURE",e.ADULT="ADULT"}(b||(b={}));var k=r(45863),S=function(e){var t=[],r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e("p:not(:first-child)",".list").toArray()[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c,s,l=o.value,d=e("a",l).text().trim(),p="Ch\u01b0\u01a1ng "+e("span:nth-child(2)",l).text().trim(),f=null!==(c=e("img",e(l).next()).attr("src"))&&void 0!==c?c:"",h=null!==(s=e("a",l).attr("href"))&&void 0!==s?s:d;t.includes(h)||(r.push(createMangaTile({id:encodeURI(h),image:encodeURI(f.replace("150x","300x300")),title:createIconText({text:P(d)}),subtitleText:createIconText({text:p})})),t.push(h))}}catch(m){a=!0,i=m}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r},M=function(e,t){var r=[],n=[];if(1===t){var a=!0,i=!1,o=void 0;try{for(var u,c=e(".row",".list-mainpage .storyitem").toArray()[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var s,l=u.value,d=e("h3.title > a",l).text().trim(),p=e("div:nth-child(2) > div:nth-child(4) > span:nth-child(1) > .color-red",l).text(),f=e("div:nth-child(1) > a > img",l).attr("src"),h=null!==(s=e("div:nth-child(1) > a",l).attr("href"))&&void 0!==s?s:d;n.includes(h)||(r.push(createMangaTile({id:h,image:f?encodeURI(f):"https://i.imgur.com/GYUxEX8.png",title:createIconText({text:P(d)}),subtitleText:createIconText({text:"Ch\u01b0\u01a1ng "+p})})),n.push(h))}}catch(E){i=!0,o=E}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}}else{var m=!0,v=!1,g=void 0;try{for(var b,y=e("p:not(:first-child)",".list").toArray()[Symbol.iterator]();!(m=(b=y.next()).done);m=!0){var x,w,k=b.value,S=e("a",k).text().trim(),M="Ch\u01b0\u01a1ng "+e("span:nth-child(2)",k).text().trim(),T=null!==(x=e("img",e(k).next()).attr("src"))&&void 0!==x?x:"",C=null!==(w=e("a",k).attr("href"))&&void 0!==w?w:S;n.includes(C)||(r.push(createMangaTile({id:C,image:encodeURI(T.replace("150x","300x300")),title:createIconText({text:P(S)}),subtitleText:createIconText({text:M})})),n.push(C))}}catch(E){v=!0,g=E}finally{try{m||null==y.return||y.return()}finally{if(v)throw g}}}return r},T=function(e){var t,r=!1,n=[],a=!0,i=!1,o=void 0;try{for(var u,c=e("a","ul.pagination > li").toArray()[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var s=u.value,l=Number(e(s).text().trim());isNaN(l)||n.push(l)}}catch(p){i=!0,o=p}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}var d=(t=Math).max.apply(t,w(n));return Number(e("ul.pagination > li > select > option").find(":selected").text().split(" ")[1])>=d&&(r=!0),r},P=function(e){return k.decodeHTML(e)};function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,a)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){E(i,n,a,o,u,"next",e)}function u(e){E(i,n,a,o,u,"throw",e)}o(void 0)}))}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){R(e,t,r[t])}))}return e}function I(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?C(e):t}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function L(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var a=j(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return I(this,r)}}var q="https://blogtruyen.vn",B="GET",U=("".concat(q),d.ContentRating.MATURE,d.TagType.BLUE,function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(r,e);var t=L(r);function r(){var e;_(this,r),(e=t.apply(this,arguments)).id="blogtruyen",e.name="blogtruyen",e.icon="Blogtruyen.png",e.description="BlogTruyen",e.websiteBaseURL="https://blogtruyen.vn",e.contentRating=d.ContentRating.EVERYONE,e.language=d.LanguageCode.VIETNAMESE,e.getMangaInternalURL=function(t){return t.includes("/")&&(t=t.split("/")[1]),"/".concat(e.id,"/").concat(t)},e.requestManager=createRequestManager({requestsPerSecond:5,requestTimeout:2e4,interceptor:{interceptRequest:function(){var e=O(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.headers=A({},null!==(r=t.headers)&&void 0!==r?r:{},{referer:q}),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),interceptResponse:function(){var e=O(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}});var n=C(e);return e.getSection=function(){var e=O(a().mark((function e(t,r){var i,o,u,c,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="top"===e.t0?3:"new_romcom"===e.t0?6:14;break;case 3:return e.next=5,n.getViewMoreItems("new_updated",{page:r});case 5:case 16:return e.abrupt("return",e.sent);case 6:return i=createRequestObject({url:"".concat(n.websiteBaseURL,"/ajax/Category/AjaxLoadMangaByCategory?id=25&orderBy=5&p=").concat(r),method:"GET"}),e.next=9,n.requestManager.schedule(i,1);case 9:return o=e.sent,u=n.cheerio.load(o.data),c=M(u,0),s=T(u)?void 0:{page:r+1},e.abrupt("return",createPagedResults({results:c,metadata:s}));case 14:return e.next=16,n.getViewMoreItems(t,{page:r});case 17:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),e}var n=r.prototype;return n.getMangaShareUrl=function(e){return"".concat(q,"/").concat(e)},n.getMangaDetails=function(e){var t=this;return O(a().mark((function r(){var n,i,o,u,c,s,l,d,p,f,h,m,v,g,b,y,x,w,k,S,M,T,C,E,O;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n="".concat(q,"/").concat(e),i=createRequestObject({url:n,method:"GET"}),r.next=4,t.requestManager.schedule(i,1);case 4:o=r.sent,u=t.cheerio.load(o.data),c=[],s="",l=1,d=u(".content").text(),p=!0,f=!1,h=void 0,r.prev=11,m=u("p",".description").toArray()[Symbol.iterator]();case 13:if(p=(v=m.next()).done){r.next=43;break}g=v.value,r.t0=u(g).clone().children().remove().end().text().trim(),r.next="T\xe1c gi\u1ea3:"===r.t0?18:"Th\u1ec3 lo\u1ea1i:"===r.t0?20:39;break;case 18:return s=P(u("a",g).text()),r.abrupt("break",40);case 20:for(b=!0,y=!1,x=void 0,r.prev=21,w=u(".category > a",g).toArray()[Symbol.iterator]();!(b=(k=w.next()).done);b=!0)S=k.value,M=u(S).text().trim(),C=null!==(T=u(S).attr("href"))&&void 0!==T?T:M,c.push(createTag({label:M,id:C}));r.next=29;break;case 25:r.prev=25,r.t1=r.catch(21),y=!0,x=r.t1;case 29:r.prev=29,r.prev=30,b||null==w.return||w.return();case 32:if(r.prev=32,!y){r.next=35;break}throw x;case 35:return r.finish(32);case 36:return r.finish(29);case 37:return l=u(".color-red",u(g).next()).text().toLowerCase().includes("\u0111ang")?1:0,r.abrupt("break",40);case 39:return r.abrupt("break",40);case 40:p=!0,r.next=13;break;case 43:r.next=49;break;case 45:r.prev=45,r.t2=r.catch(11),f=!0,h=r.t2;case 49:r.prev=49,r.prev=50,p||null==m.return||m.return();case 52:if(r.prev=52,!f){r.next=55;break}throw h;case 55:return r.finish(52);case 56:return r.finish(49);case 57:return O=null!==(E=u(".thumbnail > img").attr("src"))&&void 0!==E?E:"",r.abrupt("return",createManga({id:e,author:s,artist:s,desc:d,titles:[P(u(".entry-title > a").text().trim())],image:encodeURI(O),status:l,hentai:!1,tags:[createTagSection({label:"genres",tags:c,id:"0"})]}));case 60:case"end":return r.stop()}}),r,null,[[11,45,49,57],[21,25,29,37],[30,,32,36],[50,,52,56]])})))()},n.getChapters=function(e){var t=this;return O(a().mark((function r(){var n,i,o,u,c,s,l,p,f,h,m,v,g,b,y,x,w;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=createRequestObject({url:"".concat(q,"/").concat(e),method:B}),r.next=3,t.requestManager.schedule(n,1);case 3:for(i=r.sent,o=t.cheerio.load(i.data),u=[],c=0,s=!0,l=!1,p=void 0,r.prev=8,f=o("#list-chapters > p").toArray()[Symbol.iterator]();!(s=(h=f.next()).done);s=!0)m=h.value,c++,g=o(".publishedDate",m).text().trim().split(" "),b={date:g[0],time:g[1]},y=b.date.split(/\//),x=[y[1],y[0],y[2]].join("/"),w=new Date(x+" "+b.time),u.push(createChapter({id:null===(v=o("span.title > a",m).first().attr("href"))||void 0===v?void 0:v.split("/")[1],chapNum:c,name:P(o("span.title > a",m).text().trim()),mangaId:e,langCode:d.LanguageCode.VIETNAMESE,time:w}));r.next=16;break;case 12:r.prev=12,r.t0=r.catch(8),l=!0,p=r.t0;case 16:r.prev=16,r.prev=17,s||null==f.return||f.return();case 19:if(r.prev=19,!l){r.next=22;break}throw p;case 22:return r.finish(19);case 23:return r.finish(16);case 24:return r.abrupt("return",u);case 25:case"end":return r.stop()}}),r,null,[[8,12,16,24],[17,,19,23]])})))()},n.getChapterDetails=function(e,t){var r=this;return O(a().mark((function n(){var i,o,u,c,s,d,p,f,h,m,v,g;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=createRequestObject({url:"https://blogtruyen.vn/".concat(t,"/abc"),method:B}),n.next=3,r.requestManager.schedule(i,1);case 3:o=n.sent,u=r.cheerio.load(o.data),c=[],s=!0,d=!1,p=void 0,n.prev=7,f=u("#content > img").toArray()[Symbol.iterator]();case 9:if(s=(h=f.next()).done){n.next=18;break}if((m=h.value).attribs.src){n.next=13;break}return n.abrupt("continue",15);case 13:v=l(m.attribs.src,q),c.push(v);case 15:s=!0,n.next=9;break;case 18:n.next=24;break;case 20:n.prev=20,n.t0=n.catch(7),d=!0,p=n.t0;case 24:n.prev=24,n.prev=25,s||null==f.return||f.return();case 27:if(n.prev=27,!d){n.next=30;break}throw p;case 30:return n.finish(27);case 31:return n.finish(24);case 32:return g=createChapterDetails({id:t,mangaId:e,pages:c,longStrip:!1}),n.abrupt("return",g);case 34:case"end":return n.stop()}}),n,null,[[7,20,24,32],[25,,27,31]])})))()},n.getHomePageSections=function(e){var t=this;return O(a().mark((function r(){var n,i,o,u,c,s,l,p,f,h,m,v,g,b,y,x,w,k,S,M,T,C,E,O,_,R,j,A,I,D,N,L,B,U,G,H,Q,F,V,X,J,Y,W,$,z,Z,K,ee,te,re,ne,ae,ie,oe,ue,ce,se,le,de,pe,fe,he,me,ve,ge,be,ye,xe,we,ke,Se,Me,Te,Pe,Ce,Ee,Oe,_e,Re,je,Ae,Ie,De,Ne,Le,qe,Be,Ue,Ge,He,Qe,Fe,Ve,Xe,Je,Ye,We,$e,ze,Ze,Ke,et;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=createHomeSection({id:"featured",title:"Truy\u1ec7n \u0110\u1ec1 C\u1eed",type:d.HomeSectionType.featured}),i=createHomeSection({id:"hot",title:"Truy\u1ec7n xem nhi\u1ec1u nh\u1ea5t",view_more:!0}),o=createHomeSection({id:"new_updated",title:"Truy\u1ec7n m\u1edbi c\u1eadp nh\u1eadt",view_more:!0}),u=createHomeSection({id:"new_added",title:"Truy\u1ec7n m\u1edbi \u0111\u0103ng",view_more:!1}),c=createHomeSection({id:"full",title:"\u0110\u1ee7 b\u1ed9",view_more:!0}),s=createHomeSection({id:"girl",title:"Con g\xe1i",view_more:!0}),l=createHomeSection({id:"boy",title:"Con trai",view_more:!0}),e(i),console.log(n),e(o),e(u),e(c),e(s),e(l),"".concat(q),p=createRequestObject({url:"".concat(q,"/thumb"),method:"GET"}),r.next=18,t.requestManager.schedule(p,1);case 18:f=r.sent,h=t.cheerio.load(f.data),m=[],v=!0,g=!1,b=void 0,r.prev=22,y=h("a","div#storyPinked").toArray()[Symbol.iterator]();case 24:if(v=(x=y.next()).done){r.next=38;break}if(w=x.value,S=h("p:first-child",h(w).next()).text().trim(),M=h(w).attr("href"),C=null!==(T=null===(k=h("img",w).attr("src"))||void 0===k?void 0:k.replace("300x300","500x"))&&void 0!==T?T:"",E=h("p:last-child",h(w).next()).text().trim(),M&&S){r.next=34;break}return r.abrupt("continue",35);case 34:m.push(createMangaTile({id:M.split("/")[1],image:encodeURI(C),title:createIconText({text:P(S)}),subtitleText:createIconText({text:P(E)})}));case 35:v=!0,r.next=24;break;case 38:r.next=44;break;case 40:r.prev=40,r.t0=r.catch(22),g=!0,b=r.t0;case 44:r.prev=44,r.prev=45,v||null==y.return||y.return();case 47:if(r.prev=47,!g){r.next=50;break}throw b;case 50:return r.finish(47);case 51:return r.finish(44);case 52:return n.items=m,e(n),"",p=createRequestObject({url:"https://blogtruyen.vn/ajax/Search/AjaxLoadListManga?key=tatca&orderBy=3&p=1",method:"GET"}),O=[],r.next=59,t.requestManager.schedule(p,1);case 59:for(f=r.sent,h=t.cheerio.load(f.data),_=!0,R=!1,j=void 0,r.prev=62,A=h("p:not(:first-child)",".list").toArray()[Symbol.iterator]();!(_=(I=A.next()).done);_=!0)D=I.value,N=h("a",D).text().trim(),L="Ch\u01b0\u01a1ng "+h("span:nth-child(2)",D).text().trim(),U=null!==(B=h("img",h(D).next()).attr("src"))&&void 0!==B?B:"",H=null!==(G=h("a",D).attr("href"))&&void 0!==G?G:N,O.push(createMangaTile({id:H.split("/")[1],image:encodeURI(U.replace("150x","300x300")),title:createIconText({text:P(N)}),subtitleText:createIconText({text:L})}));r.next=70;break;case 66:r.prev=66,r.t1=r.catch(62),R=!0,j=r.t1;case 70:r.prev=70,r.prev=71,_||null==A.return||A.return();case 73:if(r.prev=73,!R){r.next=76;break}throw j;case 76:return r.finish(73);case 77:return r.finish(70);case 78:return i.items=O,e(i),"",p=createRequestObject({url:"https://blogtruyen.vn/thumb",method:"GET"}),Q=[],r.next=85,t.requestManager.schedule(p,1);case 85:for(f=r.sent,h=t.cheerio.load(f.data),F=!0,V=!1,X=void 0,r.prev=88,J=h(".row",".list-mainpage .storyitem").toArray().splice(0,20)[Symbol.iterator]();!(F=(Y=J.next()).done);F=!0)W=Y.value,z=null!==($=h("h3.title > a",W).attr("title"))&&void 0!==$?$:"",Z=h("div:nth-child(2) > div:nth-child(4) > span:nth-child(1) > .color-red",W).text(),K=h("div:nth-child(1) > a > img",W).attr("src"),re=null!==(te=null!==(ee=h("div:nth-child(1) > a",W).attr("href"))&&void 0!==ee?ee:z)&&void 0!==te?te:"",Q.push(createMangaTile({id:re.split("/")[1],image:K?encodeURI(K):"https://i.imgur.com/GYUxEX8.png",title:createIconText({text:P(z)}),subtitleText:createIconText({text:"Ch\u01b0\u01a1ng "+Z})}));r.next=96;break;case 92:r.prev=92,r.t2=r.catch(88),V=!0,X=r.t2;case 96:r.prev=96,r.prev=97,F||null==J.return||J.return();case 99:if(r.prev=99,!V){r.next=102;break}throw X;case 102:return r.finish(99);case 103:return r.finish(96);case 104:return o.items=Q,e(o),q,p=createRequestObject({url:"https://blogtruyen.vn/thumb",method:"GET"}),ne=[],r.next=111,t.requestManager.schedule(p,1);case 111:for(f=r.sent,h=t.cheerio.load(f.data),ae=!0,ie=!1,oe=void 0,r.prev=114,ue=h("a","#top-newest-story").toArray()[Symbol.iterator]();!(ae=(ce=ue.next()).done);ae=!0)se=ce.value,pe=null!==(de=null===(le=h(se).attr("title"))||void 0===le?void 0:le.trim())&&void 0!==de?de:"",fe=h("img",se).attr("src"),me=null!==(he=h(se).attr("href"))&&void 0!==he?he:pe,ne.push(createMangaTile({id:me.split("/")[1],image:fe?encodeURI(fe.replace("110x110","300x300")):"https://i.imgur.com/GYUxEX8.png",title:createIconText({text:P(pe)})}));r.next=122;break;case 118:r.prev=118,r.t3=r.catch(114),ie=!0,oe=r.t3;case 122:r.prev=122,r.prev=123,ae||null==ue.return||ue.return();case 125:if(r.prev=125,!ie){r.next=128;break}throw oe;case 128:return r.finish(125);case 129:return r.finish(122);case 130:return u.items=ne,e(u),"",p=createRequestObject({url:"https://blogtruyen.vn/ajax/Category/AjaxLoadMangaByCategory?id=0&orderBy=5&p=1",method:"GET"}),ve=[],r.next=137,t.requestManager.schedule(p,1);case 137:for(f=r.sent,h=t.cheerio.load(f.data),ge=!0,be=!1,ye=void 0,r.prev=140,xe=h("p:not(:first-child)",".list").toArray()[Symbol.iterator]();!(ge=(we=xe.next()).done);ge=!0)ke=we.value,Se=h("a",ke).text().trim(),Me="Ch\u01b0\u01a1ng "+h("span:nth-child(2)",ke).text().trim(),Pe=null!==(Te=h("img",h(ke).next()).attr("src"))&&void 0!==Te?Te:"",Ee=null!==(Ce=h("a",ke).attr("href"))&&void 0!==Ce?Ce:Se,ve.push(createMangaTile({id:Ee.split("/")[1],image:encodeURI(Pe.replace("150x","300x300")),title:createIconText({text:P(Se)}),subtitleText:createIconText({text:Me})}));r.next=148;break;case 144:r.prev=144,r.t4=r.catch(140),be=!0,ye=r.t4;case 148:r.prev=148,r.prev=149,ge||null==xe.return||xe.return();case 151:if(r.prev=151,!be){r.next=154;break}throw ye;case 154:return r.finish(151);case 155:return r.finish(148);case 156:return c.items=ve,e(c),"",p=createRequestObject({url:"https://blogtruyen.vn/ajax/Category/AjaxLoadMangaByCategory?id=29&orderBy=5&p=1",method:"GET"}),Oe=[],r.next=163,t.requestManager.schedule(p,1);case 163:for(f=r.sent,h=t.cheerio.load(f.data),_e=!0,Re=!1,je=void 0,r.prev=166,Ae=h("p:not(:first-child)",".list").toArray()[Symbol.iterator]();!(_e=(Ie=Ae.next()).done);_e=!0)De=Ie.value,Ne=h("a",De).text().trim(),Le="Ch\u01b0\u01a1ng "+h("span:nth-child(2)",De).text().trim(),Be=null!==(qe=h("img",h(De).next()).attr("src"))&&void 0!==qe?qe:"",Ge=null!==(Ue=h("a",De).attr("href"))&&void 0!==Ue?Ue:Ne,Oe.push(createMangaTile({id:Ge.split("/")[1],image:encodeURI(Be.replace("150x","300x300")),title:createIconText({text:P(Ne)}),subtitleText:createIconText({text:Le})}));r.next=174;break;case 170:r.prev=170,r.t5=r.catch(166),Re=!0,je=r.t5;case 174:r.prev=174,r.prev=175,_e||null==Ae.return||Ae.return();case 177:if(r.prev=177,!Re){r.next=180;break}throw je;case 180:return r.finish(177);case 181:return r.finish(174);case 182:return s.items=Oe,e(s),"",p=createRequestObject({url:"https://blogtruyen.vn/ajax/Category/AjaxLoadMangaByCategory?id=31&orderBy=5&p=1",method:"GET"}),He=[],r.next=189,t.requestManager.schedule(p,1);case 189:for(f=r.sent,h=t.cheerio.load(f.data),Qe=!0,Fe=!1,Ve=void 0,r.prev=192,Xe=h("p:not(:first-child)",".list").toArray()[Symbol.iterator]();!(Qe=(Je=Xe.next()).done);Qe=!0)Ye=Je.value,We=h("a",Ye).text().trim(),$e="Ch\u01b0\u01a1ng "+h("span:nth-child(2)",Ye).text().trim(),Ze=null!==(ze=h("img",h(Ye).next()).attr("src"))&&void 0!==ze?ze:"",et=null!==(Ke=h("a",Ye).attr("href"))&&void 0!==Ke?Ke:We,He.push(createMangaTile({id:et.split("/")[1],image:encodeURI(Ze.replace("150x","300x300")),title:createIconText({text:P(We)}),subtitleText:createIconText({text:$e})}));r.next=200;break;case 196:r.prev=196,r.t6=r.catch(192),Fe=!0,Ve=r.t6;case 200:r.prev=200,r.prev=201,Qe||null==Xe.return||Xe.return();case 203:if(r.prev=203,!Fe){r.next=206;break}throw Ve;case 206:return r.finish(203);case 207:return r.finish(200);case 208:l.items=He,e(l);case 210:case"end":return r.stop()}}),r,null,[[22,40,44,52],[45,,47,51],[62,66,70,78],[71,,73,77],[88,92,96,104],[97,,99,103],[114,118,122,130],[123,,125,129],[140,144,148,156],[149,,151,155],[166,170,174,182],[175,,177,181],[192,196,200,208],[201,,203,207]])})))()},n.getViewMoreItems=function(e,t){var r=this;return O(a().mark((function n(){var i,o,u,c,s,l,d,p,f;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=null!==(i=null===t||void 0===t?void 0:t.page)&&void 0!==i?i:1,u="",c="",s=1,n.t0=e,n.next="hot"===n.t0?8:"new_updated"===n.t0?11:"full"===n.t0?14:"girl"===n.t0?17:"boy"===n.t0?20:23;break;case 8:return c="".concat(q,"/ajax/Search/AjaxLoadListManga?key=tatca&orderBy=3&p=").concat(o),s=0,n.abrupt("break",24);case 11:return c="".concat(q,"/thumb-").concat(o),s=1,n.abrupt("break",24);case 14:return c="".concat(q,"/ajax/Category/AjaxLoadMangaByCategory?id=0&orderBy=5&p=").concat(o),s=0,n.abrupt("break",24);case 17:return c="".concat(q,"/ajax/Category/AjaxLoadMangaByCategory?id=29&orderBy=5&p=").concat(o),s=0,n.abrupt("break",24);case 20:return c="".concat(q,"/ajax/Category/AjaxLoadMangaByCategory?id=31&orderBy=5&p=").concat(o),s=0,n.abrupt("break",24);case 23:return n.abrupt("return",Promise.resolve(createPagedResults({results:[]})));case 24:return l=createRequestObject({url:c,method:B,param:u}),n.next=27,r.requestManager.schedule(l,1);case 27:return d=n.sent,p=r.cheerio.load(d.data),f=M(p,s),t=T(p)?void 0:{page:o+1},n.abrupt("return",createPagedResults({results:f,metadata:t}));case 32:case"end":return n.stop()}}),n)})))()},n.getSearchResults=function(e,t){var r=this;return O(a().mark((function n(){var i,o,u,c,s,l,d,p,f;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=null!==(o=null===t||void 0===t?void 0:t.page)&&void 0!==o?o:1,s=null!==(c=null===(i=e.includedTags)||void 0===i?void 0:i.map((function(e){return e.id})))&&void 0!==c?c:[],l=createRequestObject({url:encodeURI("".concat(q,"/timkiem/nangcao/1/0/").concat(s[0]?s[0]:"-1","/-1?txt=").concat(e.title?e.title:"")),method:"GET",param:encodeURI("&p=".concat(u))}),n.next=8,r.requestManager.schedule(l,1);case 8:return d=n.sent,p=r.cheerio.load(d.data),f=S(p),t=T(p)?void 0:{page:u+1},n.abrupt("return",createPagedResults({results:f,metadata:t}));case 13:case"end":return n.stop()}}),n)})))()},n.getSearchTags=function(){var e=this;return O(a().mark((function t(){var r,n,i,o,u,c,s,l,d,p,f,h,m,v,g;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],n="".concat(q,"/timkiem/nangcao"),i=createRequestObject({url:n,method:"GET"}),t.next=5,e.requestManager.schedule(i,1);case 5:o=t.sent,u=e.cheerio.load(o.data),c=!0,s=!1,l=void 0,t.prev=8,d=u("li",".list-unstyled.row").toArray()[Symbol.iterator]();case 10:if(c=(p=d.next()).done){t.next=21;break}if(f=p.value,h=P(u(f).text().trim()),(v=null!==(m=u(f).attr("data-id"))&&void 0!==m?m:h)&&h){t.next=17;break}return t.abrupt("continue",18);case 17:r.push({id:v,label:h});case 18:c=!0,t.next=10;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(8),s=!0,l=t.t0;case 27:t.prev=27,t.prev=28,c||null==d.return||d.return();case 30:if(t.prev=30,!s){t.next=33;break}throw l;case 33:return t.finish(30);case 34:return t.finish(27);case 35:return g=[createTagSection({id:"0",label:"Th\u1ec3 Lo\u1ea1i",tags:r.map((function(e){return createTag(e)}))})],t.abrupt("return",g);case 37:case"end":return t.stop()}}),t,null,[[8,23,27,35],[28,,30,34]])})))()},r}(y)),G=r(7663);function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Q=new(function(){function e(){H(this,e),this.Languages=[{name:"\u0627\u064e\u0644\u0652\u0639\u064e\u0631\u064e\u0628\u0650\u064a\u064e\u0651\u0629\u064f",MDCode:"ar",PBCode:"sa"},{name:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",MDCode:"bg",PBCode:"bg"},{name:"\u09ac\u09be\u0982\u09b2\u09be",MDCode:"bn",PBCode:"bd"},{name:"Catal\xe0",MDCode:"ca",PBCode:"es"},{name:"\u010ce\u0161tina",MDCode:"cs",PBCode:"cz"},{name:"Dansk",MDCode:"da",PBCode:"dk"},{name:"Deutsch",MDCode:"de",PBCode:"de"},{name:"English",MDCode:"en",PBCode:"gb",default:!0},{name:"Espa\xf1ol",MDCode:"es",PBCode:"es"},{name:"Espa\xf1ol (Latinoam\xe9rica)",MDCode:"es-la",PBCode:"es"},{name:"\u0641\u0627\u0631\u0633\u06cc",MDCode:"fa",PBCode:"ir"},{name:"Suomi",MDCode:"fi",PBCode:"fi"},{name:"Fran\xe7ais",MDCode:"fr",PBCode:"fr"},{name:"\u05e2\u05b4\u05d1\u05b0\u05e8\u05b4\u05d9\u05ea",MDCode:"he",PBCode:"il"},{name:"\u0939\u093f\u0928\u094d\u0926\u0940",MDCode:"hi",PBCode:"in"},{name:"Magyar",MDCode:"hu",PBCode:"hu"},{name:"Indonesia",MDCode:"id",PBCode:"id"},{name:"Italiano",MDCode:"it",PBCode:"it"},{name:"\u65e5\u672c\u8a9e",MDCode:"ja",PBCode:"jp"},{name:"\ud55c\uad6d\uc5b4",MDCode:"ko",PBCode:"kr"},{name:"Lietuvi\u0173",MDCode:"lt",PBCode:"lt"},{name:"\u043c\u043e\u043d\u0433\u043e\u043b",MDCode:"mn",PBCode:"mn"},{name:"Melayu",MDCode:"ms",PBCode:"my"},{name:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",MDCode:"my",PBCode:"mm"},{name:"Nederlands",MDCode:"nl",PBCode:"nl"},{name:"Norsk",MDCode:"no",PBCode:"no"},{name:"Polski",MDCode:"pl",PBCode:"pl"},{name:"Portugu\xeas",MDCode:"pt",PBCode:"pt"},{name:"Portugu\xeas (Brasil)",MDCode:"pt-br",PBCode:"pt"},{name:"Rom\xe2n\u0103",MDCode:"ro",PBCode:"ro"},{name:"P\u0443\u0441\u0441\u043a\u0438\u0439",MDCode:"ru",PBCode:"ru"},{name:"C\u0440\u043f\u0441\u043a\u0438",MDCode:"sr",PBCode:"rs"},{name:"Svenska",MDCode:"sv",PBCode:"se"},{name:"\u0e44\u0e17\u0e22",MDCode:"th",PBCode:"th"},{name:"Filipino",MDCode:"tl",PBCode:"ph"},{name:"T\xfcrk\xe7e",MDCode:"tr",PBCode:"tr"},{name:"Y\u043a\u0440\u0430\u0457\u0301\u043d\u0441\u044c\u043a\u0430",MDCode:"uk",PBCode:"ua"},{name:"Ti\u1ebfng Vi\u1ec7t",MDCode:"vi",PBCode:"vn"},{name:"\u4e2d\u6587 (\u7b80\u5316\u5b57)",MDCode:"zh",PBCode:"cn"},{name:"\u4e2d\u6587 (\u7e41\u9ad4\u5b57)",MDCode:"zh-hk",PBCode:"hk"}],this.Languages=this.Languages.sort((function(e,t){return e.name>t.name?1:-1}))}var t=e.prototype;return t.getMDCodeList=function(){return this.Languages.map((function(e){return e.MDCode}))},t.getName=function(e){var t,r;return null!==(r=null===(t=this.Languages.filter((function(t){return t.MDCode==e}))[0])||void 0===t?void 0:t.name)&&void 0!==r?r:"Unknown"},t.getPBCode=function(e){var t,r;return null!==(r=null===(t=this.Languages.filter((function(t){return t.MDCode==e}))[0])||void 0===t?void 0:t.PBCode)&&void 0!==r?r:"_unknown"},t.getDefault=function(){return this.Languages.filter((function(e){return e.default})).map((function(e){return e.MDCode}))},e}()),F=new(function(){function e(){H(this,e),this.Ratings=[{name:"Safe",enum:"safe",default:!0},{name:"Suggestive",enum:"suggestive"},{name:"Erotica",enum:"erotica"},{name:"Pornographic",enum:"pornographic"}]}var t=e.prototype;return t.getEnumList=function(){return this.Ratings.map((function(e){return e.enum}))},t.getName=function(e){var t,r;return null!==(r=null===(t=this.Ratings.filter((function(t){return t.enum==e}))[0])||void 0===t?void 0:t.name)&&void 0!==r?r:""},t.getDefault=function(){return this.Ratings.filter((function(e){return e.default})).map((function(e){return e.enum}))},e}()),V=new(function(){function e(){H(this,e),this.Sections=[{name:"Seasonal",enum:"seasonal",default:!0},{name:"Popular",enum:"popular",default:!0},{name:"Latest Updates",enum:"latest_updates",default:!0}]}var t=e.prototype;return t.getEnumList=function(){return this.Sections.map((function(e){return e.enum}))},t.getName=function(e){var t,r;return null!==(r=null===(t=this.Sections.filter((function(t){return t.enum==e}))[0])||void 0===t?void 0:t.name)&&void 0!==r?r:""},t.getDefault=function(){return this.Sections.filter((function(e){return e.default})).map((function(e){return e.enum}))},e}()),X=function(){function e(t){H(this,e),this.parameters={},this.pathComponents=[],this.baseUrl=t.replace(/(^\/)?(?=.*)(\/$)?/gim,"")}var t=e.prototype;return t.addPathComponent=function(e){return this.pathComponents.push(e.replace(/(^\/)?(?=.*)(\/$)?/gim,"")),this},t.addQueryParameter=function(e,t){return this.parameters[e]=t,this},t.buildUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{addTrailingSlash:!1,includeUndefinedParameters:!1},t=e.addTrailingSlash,r=e.includeUndefinedParameters,n=this.baseUrl+"/";return n+=this.pathComponents.join("/"),n+=t?"/":"",n+=Object.values(this.parameters).length>0?"?":"",n+=Object.entries(this.parameters).map((function(e){if(e[1]||r)return Array.isArray(e[1])?e[1].map((function(t){return t||r?"".concat(e[0],"[]=").concat(t):void 0})).filter((function(e){return void 0!==e})).join("&"):"object"===typeof e[1]?Object.keys(e[1]).map((function(t){return e[1][t]||r?"".concat(e[0],"[").concat(t,"]=").concat(e[1][t]):void 0})).filter((function(e){return void 0!==e})).join("&"):"".concat(e[0],"=").concat(e[1])})).filter((function(e){return void 0!==e})).join("&")},e}(),J=new(function(){function e(){H(this,e),this.ImageQualities=[{name:"Source (Original/Best)",enum:"source",ending:"",default:["manga"]},{name:"<= 512px",enum:"512",ending:".512.jpg"},{name:"<= 256px",enum:"256",ending:".256.jpg",default:["homepage","search"]}]}var t=e.prototype;return t.getEnumList=function(){return this.ImageQualities.map((function(e){return e.enum}))},t.getName=function(e){var t,r;return null!==(r=null===(t=this.ImageQualities.filter((function(t){return t.enum==e}))[0])||void 0===t?void 0:t.name)&&void 0!==r?r:""},t.getEnding=function(e){var t,r;return null!==(r=null===(t=this.ImageQualities.filter((function(t){return t.enum==e}))[0])||void 0===t?void 0:t.ending)&&void 0!==r?r:""},t.getDefault=function(e){var t;return null!==(t=this.ImageQualities.filter((function(t){var r;return null===(r=t.default)||void 0===r?void 0:r.includes(e)})).map((function(e){return e.enum}))[0])&&void 0!==t?t:""},e}());function Y(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,a)}function W(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Y(i,n,a,o,u,"next",e)}function u(e){Y(i,n,a,o,u,"throw",e)}o(void 0)}))}}var $=function(){var e=W(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("recommendedIds");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=[];case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=W(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t);case 2:n=e.sent,t.store("recommendedIds",n.slice(0,r));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Z=function(){var e=W(a().mark((function e(t,r){var n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(t);case 2:return n=e.sent,(i=n.indexOf(r,0))>-1&&n.splice(i,1),n.unshift(r),e.t0=t,e.t1=n,e.next=10,we(t);case 10:e.t2=e.sent,e.t3=e.t1.slice.call(e.t1,0,e.t2),e.t0.store.call(e.t0,"recommendedIds",e.t3);case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),K=r(48834).Buffer;function ee(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,a)}function te(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){ee(i,n,a,o,u,"next",e)}function u(e){ee(i,n,a,o,u,"throw",e)}o(void 0)}))}}var re=function(){var e=te(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("languages");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=Q.getDefault();case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=te(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("ratings");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=F.getDefault();case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=te(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("data_saver");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=!1;case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=te(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("skip_same_chapter");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=!1;case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){return createNavigationButton({id:"content_settings",value:"",label:"Content Settings",form:createForm({onSubmit:function(t){return Promise.all([e.store("languages",t.languages),e.store("ratings",t.ratings),e.store("data_saver",t.data_saver),e.store("skip_same_chapter",t.skip_same_chapter)]).then()},validate:function(){return Promise.resolve(!0)},sections:function(){return Promise.resolve([createSection({id:"content",footer:"When enabled, same chapters from different scanlation group will not be shown.",rows:function(){return Promise.all([re(e),ne(e),ae(e),ie(e)]).then(function(){var e=te(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[createSelect({id:"languages",label:"Languages",options:Q.getMDCodeList(),displayLabel:function(e){return Q.getName(e)},value:t[0],allowsMultiselect:!0,minimumOptionCount:1}),createSelect({id:"ratings",label:"Content Rating",options:F.getEnumList(),displayLabel:function(e){return F.getName(e)},value:t[1],allowsMultiselect:!0,minimumOptionCount:1}),createSwitch({id:"data_saver",label:"Data Saver",value:t[2]}),createSwitch({id:"skip_same_chapter",label:"Skip Same Chapter",value:t[3]})]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})])}})})},ue=function(){var e=te(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("homepage_thumbnail");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=J.getDefault("homepage");case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=te(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("search_thumbnail");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=J.getDefault("search");case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=te(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("manga_thumbnail");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=J.getDefault("manga");case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=te(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.keychain.retrieve("access_token");case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.next=7,t.keychain.retrieve("refresh_token");case 7:return n=e.sent,e.t0=r,e.t1=n,e.next=12,pe(r);case 12:return e.t2=e.sent,e.abrupt("return",{accessToken:e.t0,refreshToken:e.t1,tokenBody:e.t2});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=te(a().mark((function e(t,r,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.keychain.store("access_token",r),t.keychain.store("refresh_token",n)]);case 2:if(r){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.t0=r,e.t1=n,e.next=8,pe(r);case 8:return e.t2=e.sent,e.abrupt("return",{accessToken:e.t0,refreshToken:e.t1,tokenBody:e.t2});case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),pe=function(){var e=te(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",void 0);case 2:if(r=t.split(".")[1]){e.next=5;break}return e.abrupt("return",void 0);case 5:return n=K.from(r,"base64").toString("ascii"),e.abrupt("return",JSON.parse(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe={},he=function(e,t,r){return void 0==fe[t]&&(fe[t]=me(e,t,r).finally((function(){delete fe[t]}))),fe[t]},me=function(){var e=te(a().mark((function e(t,r,n){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.schedule(createRequestObject({method:"POST",url:"https://api.mangadex.org/auth/"+r,headers:{"content-type":"application/json"},data:n}),1);case 2:if(!((i=e.sent).status>399)){e.next=5;break}throw new Error("Request failed with error code:"+i.status);case 5:if("ok"==(o="string"===typeof i.data?JSON.parse(i.data):i.data).result){e.next=8;break}throw new Error("Request failed with errors: "+o.errors.map((function(e){return"[".concat(e.title,"]: ").concat(e.detail)})));case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),ve=function(){var e=te(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(t);case 2:if(e.sent){e.next=5;break}return e.abrupt("return",createNavigationButton({id:"login_button",label:"Login",value:void 0,form:createForm({onSubmit:function(){var e=te(a().mark((function e(n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.username){e.next=2;break}throw new Error("Username must not be empty");case 2:if(n.password){e.next=4;break}throw new Error("Password must not be empty");case 4:return e.next=6,he(r,"login",{username:n.username,password:n.password});case 6:return i=e.sent,e.next=9,de(t,i.token.session,i.token.refresh);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validate:te(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),sections:te(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[createSection({id:"username_section",header:"Username",footer:"Enter your MangaDex account username",rows:te(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[createInputField({id:"username",placeholder:"Username",value:"",maskInput:!1})]);case 1:case"end":return e.stop()}}),e)})))}),createSection({id:"password_section",header:"Password",footer:"Enter the password associated with your MangaDex account Username",rows:te(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[createInputField({id:"password",placeholder:"Password",value:"",maskInput:!0})]);case 1:case"end":return e.stop()}}),e)})))})]);case 1:case"end":return e.stop()}}),e)})))})}));case 5:return e.abrupt("return",createNavigationButton({id:"account_settings",value:void 0,label:"Session Info",form:createForm({onSubmit:te(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)}))),validate:te(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),sections:te(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",[createSection({id:"not_logged_in_section",rows:te(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[createLabel({id:"not_logged_in",label:"Not Logged In",value:void 0})]);case 1:case"end":return e.stop()}}),e)})))})]);case 5:return e.abrupt("return",[createSection({id:"introspect",rows:te(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object.keys(n.tokenBody).map((function(e){var t=n.tokenBody[e];return createMultilineLabel({id:e,label:e,value:Array.isArray(t)?t.join("\n"):"".concat(t)})})));case 1:case"end":return e.stop()}}),e)})))}),createSection({id:"refresh_button_section",rows:te(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[createButton({id:"refresh_token_button",label:"Refresh Token",value:void 0,onTap:te(a().mark((function e(){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(r,"refresh",{token:n.refreshToken});case 2:return i=e.sent,e.next=5,de(t,i.token.session,i.token.refresh);case 5:case"end":return e.stop()}}),e)})))}),createButton({id:"logout_button",label:"Logout",value:void 0,onTap:te(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(r,"logout",{});case 2:return e.next=4,de(t,void 0,void 0);case 4:case"end":return e.stop()}}),e)})))})]);case 1:case"end":return e.stop()}}),e)})))})]);case 6:case"end":return e.stop()}}),e)})))})}));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ge=function(e){return createNavigationButton({id:"thumbnail_settings",value:"",label:"Thumbnail Quality",form:createForm({onSubmit:function(t){return Promise.all([e.store("homepage_thumbnail",t.homepage_thumbnail[0]),e.store("search_thumbnail",t.search_thumbnail[0]),e.store("manga_thumbnail",t.manga_thumbnail[0])]).then()},validate:function(){return Promise.resolve(!0)},sections:function(){return Promise.resolve([createSection({id:"thumbnail",rows:function(){return Promise.all([ue(e),ce(e),se(e)]).then(function(){var e=te(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[createSelect({id:"homepage_thumbnail",label:"Homepage Thumbnail",options:J.getEnumList(),displayLabel:function(e){return J.getName(e)},value:[t[0]],allowsMultiselect:!1,minimumOptionCount:1}),createSelect({id:"search_thumbnail",label:"Search Thumbnail",options:J.getEnumList(),displayLabel:function(e){return J.getName(e)},value:[t[1]],allowsMultiselect:!1,minimumOptionCount:1}),createSelect({id:"manga_thumbnail",label:"Manga Thumbnail",options:J.getEnumList(),displayLabel:function(e){return J.getName(e)},value:[t[2]],allowsMultiselect:!1,minimumOptionCount:1})]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})])}})})},be=function(e){return createButton({id:"reset",label:"Reset to Default",value:"",onTap:function(){return Promise.all([e.store("languages",null),e.store("ratings",null),e.store("data_saver",null),e.store("skip_same_chapter",null),e.store("homepage_thumbnail",null),e.store("search_thumbnail",null),e.store("manga_thumbnail",null),e.store("recommendedIds",null),e.store("enabled_homepage_sections",null),e.store("enabled_recommendations",null),e.store("amount_of_recommendations",null)]).then()}})},ye=function(){var e=te(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.retrieve("enabled_homepage_sections");case 2:return r=e.sent,e.abrupt("return",void 0!=r&&r.length>0?r:V.getDefault());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=te(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("enabled_recommendations");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=!1;case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=te(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("amount_of_recommendations");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=5;case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(e){return createNavigationButton({id:"homepage_settings",value:"",label:"Homepage Settings",form:createForm({onSubmit:function(t){return Promise.all([e.store("enabled_homepage_sections",t.enabled_homepage_sections),e.store("enabled_recommendations",t.enabled_recommendations),e.store("amount_of_recommendations",t.amount_of_recommendations),z(e,t.amount_of_recommendations)]).then()},validate:function(){return Promise.resolve(!0)},sections:function(){return Promise.resolve([createSection({id:"homepage_sections_section",rows:function(){return Promise.all([ye(e)]).then(function(){var e=te(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[createSelect({id:"enabled_homepage_sections",label:"Homepage sections",options:V.getEnumList(),displayLabel:function(e){return V.getName(e)},value:null!==(r=t[0])&&void 0!==r?r:[],allowsMultiselect:!0,minimumOptionCount:0})]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),createSection({id:"recommendations_settings_section",header:"Titles recommendations",footer:"Recommendation are based on recently read chapters and shown on the homepage",rows:function(){return Promise.all([xe(e),we(e)]).then(function(){var t=te(a().mark((function t(r){var n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[createSwitch({id:"enabled_recommendations",label:"Enable recommendations",value:null!==(n=r[0])&&void 0!==n&&n}),createStepper({id:"amount_of_recommendations",label:"Amount of recommendation",value:null!==(i=r[1])&&void 0!==i?i:5,min:1,max:15,step:1}),createButton({id:"reset_recommended_ids",label:"Reset recommended titles",value:"",onTap:function(){return Promise.all([e.store("recommendedIds",null)]).then()}})]);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}})])}})})},Se=JSON.parse('[{"result":"ok","data":{"id":"0234a31e-a729-4e28-9d6a-3f87c4966b9e","type":"tag","attributes":{"name":{"en":"Oneshot"},"description":[],"group":"format","version":1}},"relationships":[]},{"result":"ok","data":{"id":"07251805-a27e-4d59-b488-f0bfbec15168","type":"tag","attributes":{"name":{"en":"Thriller"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"0a39b5a1-b235-4886-a747-1d05d216532d","type":"tag","attributes":{"name":{"en":"Award Winning"},"description":[],"group":"format","version":1}},"relationships":[]},{"result":"ok","data":{"id":"0bc90acb-ccc1-44ca-a34a-b9f3a73259d0","type":"tag","attributes":{"name":{"en":"Reincarnation"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"256c8bd9-4904-4360-bf4f-508a76d67183","type":"tag","attributes":{"name":{"en":"Sci-Fi"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"292e862b-2d17-4062-90a2-0356caa4ae27","type":"tag","attributes":{"name":{"en":"Time Travel"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"2bd2e8d0-f146-434a-9b51-fc9ff2c5fe6a","type":"tag","attributes":{"name":{"en":"Genderswap"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"2d1f5d56-a1e5-4d0d-a961-2193588b08ec","type":"tag","attributes":{"name":{"en":"Loli"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"31932a7e-5b8e-49a6-9f12-2afa39dc544c","type":"tag","attributes":{"name":{"en":"Traditional Games"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"320831a8-4026-470b-94f6-8353740e6f04","type":"tag","attributes":{"name":{"en":"Official Colored"},"description":[],"group":"format","version":1}},"relationships":[]},{"result":"ok","data":{"id":"33771934-028e-4cb3-8744-691e866a923e","type":"tag","attributes":{"name":{"en":"Historical"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"36fd93ea-e8b8-445e-b836-358f02b3d33d","type":"tag","attributes":{"name":{"en":"Monsters"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"391b0423-d847-456f-aff0-8b0cfc03066b","type":"tag","attributes":{"name":{"en":"Action"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"39730448-9a5f-48a2-85b0-a70db87b1233","type":"tag","attributes":{"name":{"en":"Demons"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"3b60b75c-a2d7-4860-ab56-05f391bb889c","type":"tag","attributes":{"name":{"en":"Psychological"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"3bb26d85-09d5-4d2e-880c-c34b974339e9","type":"tag","attributes":{"name":{"en":"Ghosts"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"3de8c75d-8ee3-48ff-98ee-e20a65c86451","type":"tag","attributes":{"name":{"en":"Animals"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"3e2b8dae-350e-4ab8-a8ce-016e844b9f0d","type":"tag","attributes":{"name":{"en":"Long Strip"},"description":[],"group":"format","version":1}},"relationships":[]},{"result":"ok","data":{"id":"423e2eae-a7a2-4a8b-ac03-a8351462d71d","type":"tag","attributes":{"name":{"en":"Romance"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"489dd859-9b61-4c37-af75-5b18e88daafc","type":"tag","attributes":{"name":{"en":"Ninja"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"4d32cc48-9f00-4cca-9b5a-a839f0764984","type":"tag","attributes":{"name":{"en":"Comedy"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"50880a9d-5440-4732-9afb-8f457127e836","type":"tag","attributes":{"name":{"en":"Mecha"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"51d83883-4103-437c-b4b1-731cb73d786c","type":"tag","attributes":{"name":{"en":"Anthology"},"description":[],"group":"format","version":1}},"relationships":[]},{"result":"ok","data":{"id":"5920b825-4181-4a17-beeb-9918b0ff7a30","type":"tag","attributes":{"name":{"en":"Boys\' Love"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"5bd0e105-4481-44ca-b6e7-7544da56b1a3","type":"tag","attributes":{"name":{"en":"Incest"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"5ca48985-9a9d-4bd8-be29-80dc0303db72","type":"tag","attributes":{"name":{"en":"Crime"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"5fff9cde-849c-4d78-aab0-0d52b2ee1d25","type":"tag","attributes":{"name":{"en":"Survival"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"631ef465-9aba-4afb-b0fc-ea10efe274a8","type":"tag","attributes":{"name":{"en":"Zombies"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"65761a2a-415e-47f3-bef2-a9dababba7a6","type":"tag","attributes":{"name":{"en":"Reverse Harem"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"69964a64-2f90-4d33-beeb-f3ed2875eb4c","type":"tag","attributes":{"name":{"en":"Sports"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"7064a261-a137-4d3a-8848-2d385de3a99c","type":"tag","attributes":{"name":{"en":"Superhero"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"799c202e-7daa-44eb-9cf7-8a3c0441531e","type":"tag","attributes":{"name":{"en":"Martial Arts"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"7b2ce280-79ef-4c09-9b58-12b7c23a9b78","type":"tag","attributes":{"name":{"en":"Fan Colored"},"description":[],"group":"format","version":1}},"relationships":[]},{"result":"ok","data":{"id":"81183756-1453-4c81-aa9e-f6e1b63be016","type":"tag","attributes":{"name":{"en":"Samurai"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"81c836c9-914a-4eca-981a-560dad663e73","type":"tag","attributes":{"name":{"en":"Magical Girls"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"85daba54-a71c-4554-8a28-9901a8b0afad","type":"tag","attributes":{"name":{"en":"Mafia"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"87cc87cd-a395-47af-b27a-93258283bbc6","type":"tag","attributes":{"name":{"en":"Adventure"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"891cf039-b895-47f0-9229-bef4c96eccd4","type":"tag","attributes":{"name":{"en":"User Created"},"description":[],"group":"format","version":1}},"relationships":[]},{"result":"ok","data":{"id":"8c86611e-fab7-4986-9dec-d1a2f44acdd5","type":"tag","attributes":{"name":{"en":"Virtual Reality"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"92d6d951-ca5e-429c-ac78-451071cbf064","type":"tag","attributes":{"name":{"en":"Office Workers"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"9438db5a-7e2a-4ac0-b39e-e0d95a34b8a8","type":"tag","attributes":{"name":{"en":"Video Games"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"9467335a-1b83-4497-9231-765337a00b96","type":"tag","attributes":{"name":{"en":"Post-Apocalyptic"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"97893a4c-12af-4dac-b6be-0dffb353568e","type":"tag","attributes":{"name":{"en":"Sexual Violence"},"description":[],"group":"content","version":1}},"relationships":[]},{"result":"ok","data":{"id":"9ab53f92-3eed-4e9b-903a-917c86035ee3","type":"tag","attributes":{"name":{"en":"Crossdressing"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"a1f53773-c69a-4ce5-8cab-fffcd90b1565","type":"tag","attributes":{"name":{"en":"Magic"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"a3c67850-4684-404e-9b7f-c69850ee5da6","type":"tag","attributes":{"name":{"en":"Girls\' Love"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"aafb99c1-7f60-43fa-b75f-fc9502ce29c7","type":"tag","attributes":{"name":{"en":"Harem"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"ac72833b-c4e9-4878-b9db-6c8a4a99444a","type":"tag","attributes":{"name":{"en":"Military"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"acc803a4-c95a-4c22-86fc-eb6b582d82a2","type":"tag","attributes":{"name":{"en":"Wuxia"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"ace04997-f6bd-436e-b261-779182193d3d","type":"tag","attributes":{"name":{"en":"Isekai"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"b11fda93-8f1d-4bef-b2ed-8803d3733170","type":"tag","attributes":{"name":{"en":"4-Koma"},"description":[],"group":"format","version":1}},"relationships":[]},{"result":"ok","data":{"id":"b13b2a48-c720-44a9-9c77-39c9979373fb","type":"tag","attributes":{"name":{"en":"Doujinshi"},"description":[],"group":"format","version":1}},"relationships":[]},{"result":"ok","data":{"id":"b1e97889-25b4-4258-b28b-cd7f4d28ea9b","type":"tag","attributes":{"name":{"en":"Philosophical"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"b29d6a3d-1569-4e7a-8caf-7557bc92cd5d","type":"tag","attributes":{"name":{"en":"Gore"},"description":[],"group":"content","version":1}},"relationships":[]},{"result":"ok","data":{"id":"b9af3a63-f058-46de-a9a0-e0c13906197a","type":"tag","attributes":{"name":{"en":"Drama"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"c8cbe35b-1b2b-4a3f-9c37-db84c4514856","type":"tag","attributes":{"name":{"en":"Medical"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"caaa44eb-cd40-4177-b930-79d3ef2afe87","type":"tag","attributes":{"name":{"en":"School Life"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"cdad7e68-1419-41dd-bdce-27753074a640","type":"tag","attributes":{"name":{"en":"Horror"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"cdc58593-87dd-415e-bbc0-2ec27bf404cc","type":"tag","attributes":{"name":{"en":"Fantasy"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"d14322ac-4d6f-4e9b-afd9-629d5f4d8a41","type":"tag","attributes":{"name":{"en":"Villainess"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"d7d1730f-6eb0-4ba6-9437-602cac38664c","type":"tag","attributes":{"name":{"en":"Vampires"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"da2d50ca-3018-4cc0-ac7a-6b7d472a29ea","type":"tag","attributes":{"name":{"en":"Delinquents"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"dd1f77c5-dea9-4e2b-97ae-224af09caf99","type":"tag","attributes":{"name":{"en":"Monster Girls"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"ddefd648-5140-4e5f-ba18-4eca4071d19b","type":"tag","attributes":{"name":{"en":"Shota"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"df33b754-73a3-4c54-80e6-1a74a8058539","type":"tag","attributes":{"name":{"en":"Police"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"e197df38-d0e7-43b5-9b09-2842d0c326dd","type":"tag","attributes":{"name":{"en":"Web Comic"},"description":[],"group":"format","version":1}},"relationships":[]},{"result":"ok","data":{"id":"e5301a23-ebd9-49dd-a0cb-2add944c7fe9","type":"tag","attributes":{"name":{"en":"Slice of Life"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"e64f6742-c834-471d-8d72-dd51fc02b835","type":"tag","attributes":{"name":{"en":"Aliens"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"ea2bc92d-1c26-4930-9b7c-d5c0dc1b6869","type":"tag","attributes":{"name":{"en":"Cooking"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"eabc5b4c-6aff-42f3-b657-3e90cbd00b75","type":"tag","attributes":{"name":{"en":"Supernatural"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"ee968100-4191-4968-93d3-f82d72be7e46","type":"tag","attributes":{"name":{"en":"Mystery"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"f4122d1c-3b44-44d0-9936-ff7502c39ad3","type":"tag","attributes":{"name":{"en":"Adaptation"},"description":[],"group":"format","version":1}},"relationships":[]},{"result":"ok","data":{"id":"f42fbf9e-188a-447b-9fdc-f19dc1e4d685","type":"tag","attributes":{"name":{"en":"Music"},"description":[],"group":"theme","version":1}},"relationships":[]},{"result":"ok","data":{"id":"f5ba408b-0e7a-484d-8d49-4e9125ac96de","type":"tag","attributes":{"name":{"en":"Full Color"},"description":[],"group":"format","version":1}},"relationships":[]},{"result":"ok","data":{"id":"f8f62932-27da-4fe4-8ee1-6779a8c5edba","type":"tag","attributes":{"name":{"en":"Tragedy"},"description":[],"group":"genre","version":1}},"relationships":[]},{"result":"ok","data":{"id":"fad12b5e-68ba-460e-b933-9ae8318f5b65","type":"tag","attributes":{"name":{"en":"Gyaru"},"description":[],"group":"theme","version":1}},"relationships":[]}]');function Me(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,a)}function Te(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Me(i,n,a,o,u,"next",e)}function u(e){Me(i,n,a,o,u,"throw",e)}o(void 0)}))}}var Pe=function(){var e=Te(a().mark((function e(t,r,n){var i,o,u,c,s,l,d,p,f,h,m,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],o=!0,u=!1,c=void 0,e.prev=2,s=t[Symbol.iterator]();case 4:if(o=(l=s.next()).done){e.next=26;break}if(d=l.value,p=d.id,f=d.attributes,h=r.decodeHTMLEntity(Object.values(f.title)[0]),!(m=d.relationships.filter((function(e){return"cover_art"==e.type})).map((function(e){var t;return null===(t=e.attributes)||void 0===t?void 0:t.fileName}))[0])){e.next=20;break}return e.t1="".concat(r.COVER_BASE_URL,"/").concat(p,"/").concat(m),e.t2=J,e.next=15,n(r.stateManager);case 15:e.t3=e.sent,e.t4=e.t2.getEnding.call(e.t2,e.t3),e.t0=e.t1.concat.call(e.t1,e.t4),e.next=21;break;case 20:e.t0="https://mangadex.org/_nuxt/img/cover-placeholder.d12c3c5.jpg";case 21:v=e.t0,i.push(createMangaTile({id:p,title:createIconText({text:h}),image:v}));case 23:o=!0,e.next=4;break;case 26:e.next=32;break;case 28:e.prev=28,e.t5=e.catch(2),u=!0,c=e.t5;case 32:e.prev=32,e.prev=33,o||null==s.return||s.return();case 35:if(e.prev=35,!u){e.next=38;break}throw c;case 38:return e.finish(35);case 39:return e.finish(32);case 40:return e.abrupt("return",i);case 41:case"end":return e.stop()}}),e,null,[[2,28,32,40],[33,,35,39]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Ce=function(){var e=Te(a().mark((function e(t,r,n,i,o){var u,c,s,l,d,p,f,h,m,v,g,b,y,x;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=[],c=!0,s=!1,l=void 0,e.prev=2,d=t[Symbol.iterator]();case 4:if(c=(p=d.next()).done){e.next=30;break}if(f=p.value,h=f.relationships.filter((function(e){return"manga"==e.type})).map((function(e){return e.id}))[0],m=f.relationships.filter((function(e){return"manga"==e.type})).map((function(e){return e.attributes.title.en}))[0],v=f.attributes.volume,g=f.attributes.chapter,b="".concat(v?"Vol. ".concat(v):""," ").concat(g?"Ch. ".concat(g):""),!(y=r[h])){e.next=22;break}return e.t1="".concat(n.COVER_BASE_URL,"/").concat(h,"/").concat(y),e.t2=J,e.next=17,i(n.stateManager);case 17:e.t3=e.sent,e.t4=e.t2.getEnding.call(e.t2,e.t3),e.t0=e.t1.concat.call(e.t1,e.t4),e.next=23;break;case 22:e.t0="https://mangadex.org/_nuxt/img/cover-placeholder.d12c3c5.jpg";case 23:if(x=e.t0,h&&m&&o.includes(f.relationships.filter((function(e){return"manga"==e.type})).map((function(e){return e.attributes.contentRating}))[0])){e.next=26;break}return e.abrupt("continue",27);case 26:u.push(createMangaTile({id:h,title:createIconText({text:m}),subtitleText:createIconText({text:b}),image:x}));case 27:c=!0,e.next=4;break;case 30:e.next=36;break;case 32:e.prev=32,e.t5=e.catch(2),s=!0,l=e.t5;case 36:e.prev=36,e.prev=37,c||null==d.return||d.return();case 39:if(e.prev=39,!s){e.next=42;break}throw l;case 42:return e.finish(39);case 43:return e.finish(36);case 44:return e.abrupt("return",u);case 45:case"end":return e.stop()}}),e,null,[[2,32,36,44],[37,,39,43]])})));return function(t,r,n,a,i){return e.apply(this,arguments)}}();function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,a)}function Re(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){_e(i,n,a,o,u,"next",e)}function u(e){_e(i,n,a,o,u,"throw",e)}o(void 0)}))}}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ae(e,t,r[t])}))}return e}function Ne(e,t){return!t||"object"!==Be(t)&&"function"!==typeof t?Oe(e):t}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e){return function(e){if(Array.isArray(e))return Ee(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ee(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Be=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ie(e);if(t){var a=Ie(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Ne(this,r)}}var Ge="https://mangadex.org",He="https://api.mangadex.org",Qe="https://uploads.mangadex.org/covers",Fe=(d.ContentRating.EVERYONE,d.LanguageCode.ENGLISH,d.TagType.GREEN,function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(r,e);var t=Ue(r);function r(){var e;je(this,r),(e=t.apply(this,arguments)).id="mangadex",e.description="Extension that pulls manga from MangaDex",e.icon="MangaDex.png",e.name="mangadex",e.websiteBaseURL="https://mangadex.org",e.contentRating=d.ContentRating.EVERYONE,e.language=d.LanguageCode.ENGLISH;var n=Oe(e);e.getSection=function(){var e=Re(a().mark((function e(t,r){var i,o,u,c,s,l,d,p,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=100*r-100,o=[{id:"423e2eae-a7a2-4a8b-ac03-a8351462d71d",label:"romance"}],u="3b60b75c-a2d7-4860-ab56-05f391bb889c,3b60b75c-a2d7-4860-ab56-05f391bb889c,5920b825-4181-4a17-beeb-9918b0ff7a30,a3c67850-4684-404e-9b7f-c69850ee5da6,acc803a4-c95a-4c22-86fc-eb6b582d82a2,f8f62932-27da-4fe4-8ee1-6779a8c5edba,2bd2e8d0-f146-434a-9b51-fc9ff2c5fe6a,2d1f5d56-a1e5-4d0d-a961-2193588b08ec,5bd0e105-4481-44ca-b6e7-7544da56b1a3,65761a2a-415e-47f3-bef2-a9dababba7a6,9ab53f92-3eed-4e9b-903a-917c86035ee3,aafb99c1-7f60-43fa-b75f-fc9502ce29c7".split(",").map((function(e){return{id:e,label:""}})),c=["en","vi"],s="",e.t0=t,e.next="top"===e.t0?8:"new_romcom"===e.t0?9:11;break;case 8:return e.abrupt("return",n.getViewMoreItems("popular",{offset:i}));case 9:return s=new X(n.MANGADEX_API).addPathComponent("manga").addQueryParameter("limit",100).addQueryParameter("order",{followedCount:"desc"}).addQueryParameter("offset",i).addQueryParameter("includes",["cover_art"]).addQueryParameter("includedTags",null===o||void 0===o?void 0:o.map((function(e){return e.id}))).addQueryParameter("excludedTags",null===u||void 0===u?void 0:u.map((function(e){return e.id}))).addQueryParameter("order",{createdAt:"desc"}).addQueryParameter("availableTranslatedLanguage",c).addQueryParameter("originalLanguage",["ja"]).addQueryParameter("hasAvailableChapters",!0).buildUrl(),e.abrupt("break",14);case 11:return e.next=13,n.getViewMoreItems(t,{offset:100*r-100});case 13:return e.abrupt("return",e.sent);case 14:return l=createRequestObject({url:s,method:"GET"}),e.next=17,n.requestManager.schedule(l,1);case 17:if(d=e.sent,void 0!==(p="string"===typeof d.data?JSON.parse(d.data):d.data).data){e.next=21;break}throw new Error("Failed to parse json results for getViewMoreItems");case 21:return e.next=23,Pe(p.data,n,ue);case 23:return f=e.sent,e.abrupt("return",createPagedResults({results:f,metadata:{offset:i+100}}));case 25:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),e.MANGADEX_DOMAIN=Ge,e.MANGADEX_API=He,e.COVER_BASE_URL=Qe;var i=Oe(e);return e.requestManager=createRequestManager({requestsPerSecond:4,requestTimeout:15e3,interceptor:{interceptRequest:function(){var e=Re(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.headers=De({},t.headers,{referer:"".concat(i.MANGADEX_DOMAIN,"/")}),e.next=3,le(i.stateManager);case 3:if(r=e.sent,!t.url.includes("auth/")&&r){e.next=6;break}return e.abrupt("return",t);case 6:if(!(Number(r.tokenBody.exp)<=Date.now()/1e3-60)){e.next=21;break}return e.prev=7,e.next=10,he(i.requestManager,"refresh",{token:r.refreshToken});case 10:return n=e.sent,e.next=13,de(i.stateManager,n.token.session,n.token.refresh);case 13:if(r=e.sent){e.next=16;break}return e.abrupt("return",t);case 16:e.next=21;break;case 18:return e.prev=18,e.t0=e.catch(7),e.abrupt("return",t);case 21:return t.headers=De({},t.headers,{authorization:"Bearer "+r.accessToken}),e.abrupt("return",t);case 23:case"end":return e.stop()}}),e,null,[[7,18]])})));return function(t){return e.apply(this,arguments)}}(),interceptResponse:function(){var e=Re(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),e.stateManager=createSourceStateManager({}),e}var n=r.prototype;return n.getSourceMenu=function(){var e=this;return Re(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve(createSection({id:"main",header:"Source Settings",rows:Re(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ve(e.stateManager,e.requestManager);case 2:return t.t0=t.sent,t.t1=oe(e.stateManager),t.t2=ge(e.stateManager),t.t3=ke(e.stateManager),t.t4=be(e.stateManager),t.abrupt("return",[t.t0,t.t1,t.t2,t.t3,t.t4]);case 8:case"end":return t.stop()}}),t)})))})));case 1:case"end":return t.stop()}}),t)})))()},n.getMangaShareUrl=function(e){return"".concat(this.MANGADEX_DOMAIN,"/title/").concat(e)},n.getSearchTags=function(){return Re(a().mark((function e(){var t,r,n,i,o,u,c,s,l,d,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},r=!0,n=!1,i=void 0,e.prev=2,o=Se[Symbol.iterator]();!(r=(u=o.next()).done);r=!0)c=u.value,l=c.data.attributes.group,null==t[l]&&(t[l]=createTagSection({id:l,label:l.charAt(0).toUpperCase()+l.slice(1),tags:[]})),d=createTag({id:c.data.id,label:c.data.attributes.name.en}),t[l].tags=qe(null!==(p=null===(s=t[l])||void 0===s?void 0:s.tags)&&void 0!==p?p:[]).concat([d]);e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),n=!0,i=e.t0;case 10:e.prev=10,e.prev=11,r||null==o.return||o.return();case 13:if(e.prev=13,!n){e.next=16;break}throw i;case 16:return e.finish(13);case 17:return e.finish(10);case 18:return e.abrupt("return",Object.values(t));case 19:case"end":return e.stop()}}),e,null,[[2,6,10,18],[11,,13,17]])})))()},n.supportsSearchOperators=function(){return Re(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))()},n.supportsTagExclusion=function(){return Re(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))()},n.getCustomListRequestURL=function(e,t){var r=this;return Re(a().mark((function n(){var i,o,u;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=createRequestObject({url:"".concat(r.MANGADEX_API,"/list/").concat(e),method:"GET"}),n.next=3,r.requestManager.schedule(i,1);case 3:return o=n.sent,u="string"===typeof o.data?JSON.parse(o.data):o.data,n.abrupt("return",new X(r.MANGADEX_API).addPathComponent("manga").addQueryParameter("limit",100).addQueryParameter("contentRating",t).addQueryParameter("includes",["cover_art"]).addQueryParameter("ids",u.data.relationships.filter((function(e){return"manga"==e.type})).map((function(e){return e.id}))).buildUrl());case 6:case"end":return n.stop()}}),n)})))()},n.getCoversMapping=function(e,t){var r=this;return Re(a().mark((function n(){var i,o,u,c,s,l,d,p,f,h,m,v;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={},o=createRequestObject({url:new X(r.MANGADEX_API).addPathComponent("manga").addQueryParameter("limit",100).addQueryParameter("contentRating",t).addQueryParameter("ids",e).addQueryParameter("includes",["cover_art"]).buildUrl(),method:"GET"}),n.next=4,r.requestManager.schedule(o,1);case 4:u=n.sent,c="string"===typeof u.data?JSON.parse(u.data):u.data,s=!0,l=!1,d=void 0,n.prev=7,p=c.data[Symbol.iterator]();case 9:if(s=(f=p.next()).done){n.next=19;break}if(h=f.value,m=h.id,v=h.relationships.filter((function(e){return"cover_art"==e.type})).map((function(e){var t;return null===(t=e.attributes)||void 0===t?void 0:t.fileName}))[0],m&&v){n.next=15;break}return n.abrupt("continue",16);case 15:i[m]=v;case 16:s=!0,n.next=9;break;case 19:n.next=25;break;case 21:n.prev=21,n.t0=n.catch(7),l=!0,d=n.t0;case 25:n.prev=25,n.prev=26,s||null==p.return||p.return();case 28:if(n.prev=28,!l){n.next=31;break}throw d;case 31:return n.finish(28);case 32:return n.finish(25);case 33:return n.abrupt("return",i);case 34:case"end":return n.stop()}}),n,null,[[7,21,25,33],[26,,28,32]])})))()},n.getMangaDetails=function(e){var t=this;return Re(a().mark((function r(){var n,i,o,u,c,s,l,p,f,h,m,v,g,b,y,x,w,k,S;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.includes("-")){r.next=4;break}throw console.log("OLD ID: PLEASE MIGRATE"),new Error("OLD ID: PLEASE MIGRATE");case 4:return i=createRequestObject({url:new X(t.MANGADEX_API).addPathComponent("manga").addPathComponent(e).addQueryParameter("includes",["author","artist","cover_art"]).buildUrl(),method:"GET"}),r.next=7,t.requestManager.schedule(i,1);case 7:for(o=r.sent,u="string"===typeof o.data?JSON.parse(o.data):o.data,c=u.data.attributes,s=qe(Object.values(c.title)).concat(qe(c.altTitles.flatMap((function(e){return Object.values(e)})))).map((function(e){return t.decodeHTMLEntity(e)})).filter((function(e){return e})),l=null===(n=t.decodeHTMLEntity(c.description.en))||void 0===n?void 0:n.replace(/\[\/?[bus]]/g,""),p=d.MangaStatus.COMPLETED,"ongoing"==c.status&&(p=d.MangaStatus.ONGOING),f=[],h=!0,m=!1,v=void 0,r.prev=16,g=function(e,t){var r,n=t.value,a=n.attributes.name;f.push(createTag({id:n.id,label:null!==(r=Object.keys(a).map((function(e){return a[e]}))[0])&&void 0!==r?r:"Unknown"}))},b=c.tags[Symbol.iterator]();!(h=(y=b.next()).done);h=!0)g(0,y);r.next=25;break;case 21:r.prev=21,r.t0=r.catch(16),m=!0,v=r.t0;case 25:r.prev=25,r.prev=26,h||null==b.return||b.return();case 28:if(r.prev=28,!m){r.next=31;break}throw v;case 31:return r.finish(28);case 32:return r.finish(25);case 33:if(x=u.data.relationships.filter((function(e){return"author"==e.type})).map((function(e){return e.attributes.name})).join(", "),w=u.data.relationships.filter((function(e){return"artist"==e.type})).map((function(e){return e.attributes.name})).join(", "),!(k=u.data.relationships.filter((function(e){return"cover_art"==e.type})).map((function(e){var t;return null===(t=e.attributes)||void 0===t?void 0:t.fileName}))[0])){r.next=47;break}return r.t1="".concat(t.COVER_BASE_URL,"/").concat(e,"/").concat(k),r.t2=J,r.next=42,se(t.stateManager);case 42:r.t3=r.sent,r.t4=r.t2.getEnding.call(r.t2,r.t3),S=r.t1.concat.call(r.t1,r.t4),r.next=48;break;case 47:S="https://mangadex.org/_nuxt/img/cover-placeholder.d12c3c5.jpg";case 48:return r.abrupt("return",createManga({id:e,titles:s,image:S,author:x,artist:w,desc:l,rating:5,status:p,tags:[createTagSection({id:"tags",label:"Tags",tags:f})]}));case 49:case"end":return r.stop()}}),r,null,[[16,21,25,33],[26,,28,32]])})))()},n.getChapters=function(e){var t=this;return Re(a().mark((function r(){var n,i,o,u,c,s,l,d,p,f,h,m,v,g,b,y,x,w,k,S,M,T,P,C,E,O,_;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.includes("-")){r.next=3;break}throw console.log("OLD ID: PLEASE MIGRATE"),new Error("OLD ID: PLEASE MIGRATE");case 3:return r.next=5,re(t.stateManager);case 5:return n=r.sent,r.next=8,ie(t.stateManager);case 8:return i=r.sent,r.next=11,ne(t.stateManager);case 11:o=r.sent,u=[],c=[],s=0,l=0,d=!0;case 17:if(!d){r.next=46;break}return p=createRequestObject({url:new X(t.MANGADEX_API).addPathComponent("manga").addPathComponent(e).addPathComponent("feed").addQueryParameter("limit",500).addQueryParameter("offset",s).addQueryParameter("includes",["scanlation_group"]).addQueryParameter("translatedLanguage",n).addQueryParameter("order",{volume:"desc",chapter:"desc",publishAt:"desc"}).addQueryParameter("contentRating",o).addQueryParameter("includeFutureUpdates","0").buildUrl(),method:"GET"}),r.next=21,t.requestManager.schedule(p,1);case 21:if(f=r.sent,h="string"===typeof f.data?JSON.parse(f.data):f.data,s+=500,void 0!==h.data){r.next=26;break}throw new Error("Failed to parse json results for ".concat(e));case 26:for(m=!0,v=!1,g=void 0,r.prev=27,b=h.data[Symbol.iterator]();!(m=(y=b.next()).done);m=!0)x=y.value,w=x.id,k=x.attributes,S=t.decodeHTMLEntity(k.title),M=Number(null===k||void 0===k?void 0:k.chapter),T=Number(null===k||void 0===k?void 0:k.volume),P=Q.getPBCode(k.translatedLanguage),C=new Date(k.publishAt),E=x.relationships.filter((function(e){return"scanlation_group"==e.type})).map((function(e){return e.attributes.name})).join(", "),O=Number(k.pages),_="".concat(T,"-").concat(M,"-").concat(k.translatedLanguage),u.includes(_)&&i||!(O>0)||(c.push(createChapter({id:w,mangaId:e,name:S,chapNum:M,volume:T,langCode:P,group:E,time:C,sortingIndex:l})),u.push(_),l--);r.next=35;break;case 31:r.prev=31,r.t0=r.catch(27),v=!0,g=r.t0;case 35:r.prev=35,r.prev=36,m||null==b.return||b.return();case 38:if(r.prev=38,!v){r.next=41;break}throw g;case 41:return r.finish(38);case 42:return r.finish(35);case 43:h.total<=s&&(d=!1),r.next=17;break;case 46:return r.abrupt("return",c);case 47:case"end":return r.stop()}}),r,null,[[27,31,35,43],[36,,38,42]])})))()},n.getChapterDetails=function(e,t){var r=this;return Re(a().mark((function n(){var i,o,u,c,s,l,d;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.includes("-")){n.next=3;break}throw console.log("OLD ID: PLEASE MIGRATE"),new Error("OLD ID: PLEASE REFRESH AND CLEAR ORPHANED CHAPTERS");case 3:return n.next=5,ae(r.stateManager);case 5:return i=n.sent,o=createRequestObject({url:"".concat(r.MANGADEX_API,"/at-home/server/").concat(t),method:"GET"}),n.next=9,r.requestManager.schedule(o,1);case 9:return u=n.sent,c="string"===typeof u.data?JSON.parse(u.data):u.data,s=c.baseUrl,l=c.chapter,d=i?l.dataSaver.map((function(e){return"".concat(s,"/data-saver/").concat(l.hash,"/").concat(e)})):l.data.map((function(e){return"".concat(s,"/data/").concat(l.hash,"/").concat(e)})),Z(r.stateManager,e),n.abrupt("return",createChapterDetails({id:t,mangaId:e,pages:d,longStrip:!1}));case 17:case"end":return n.stop()}}),n)})))()},n.getSearchResults=function(e,t){var r=this;return Re(a().mark((function n(){var i,o,u,c,s,l,d,p,f,h,m,v,g,b;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,ne(r.stateManager);case 3:return s=n.sent,d=null!==(l=null===t||void 0===t?void 0:t.offset)&&void 0!==l?l:0,p=[],f=(null===(i=e.title)||void 0===i?void 0:i.match(/[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i))?"ids[]":"title",m=new X(r.MANGADEX_API).addPathComponent("manga").addQueryParameter(f,(null!==(h=null===(o=e.title)||void 0===o?void 0:o.length)&&void 0!==h?h:0)>0?encodeURIComponent(e.title):void 0).addQueryParameter("limit",100).addQueryParameter("offset",d).addQueryParameter("contentRating",s).addQueryParameter("includes",["cover_art"]).addQueryParameter("includedTags",null===(u=e.includedTags)||void 0===u?void 0:u.map((function(e){return e.id}))).addQueryParameter("includedTagsMode",e.includeOperator).addQueryParameter("excludedTags",null===(c=e.excludedTags)||void 0===c?void 0:c.map((function(e){return e.id}))).addQueryParameter("excludedTagsMode",e.excludeOperator).buildUrl(),v=createRequestObject({url:m,method:"GET"}),n.next=13,r.requestManager.schedule(v,1);case 13:if(200==(g=n.sent).status){n.next=16;break}return n.abrupt("return",createPagedResults({results:p}));case 16:if(void 0!==(b="string"===typeof g.data?JSON.parse(g.data):g.data).data){n.next=19;break}throw new Error("Failed to parse json for the given search");case 19:return n.next=21,Pe(b.data,r,ce);case 21:return p=n.sent,n.abrupt("return",createPagedResults({results:p,metadata:{offset:d+100}}));case 23:case"end":return n.stop()}}),n)})))()},n.getHomePageSections=function(e){var t=this;return Re(a().mark((function r(){var n,i,o,u,c,s,l,p,f,h,m,v,g,b,y,x,w,k;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ne(t.stateManager);case 2:return n=r.sent,r.next=5,re(t.stateManager);case 5:return i=r.sent,o=[],r.next=9,ye(t.stateManager);case 9:return u=r.sent,r.t0=createRequestObject,r.next=13,t.getCustomListRequestURL("ff210dec-862b-4c17-8608-0e7f97c70488",n);case 13:for(r.t1=r.sent,r.t2={url:r.t1,method:"GET"},r.t3=(0,r.t0)(r.t2),r.t4=createHomeSection({id:"seasonal",title:"Seasonal",type:d.HomeSectionType.featured}),r.t5={request:r.t3,section:r.t4},r.t6={request:createRequestObject({url:new X(t.MANGADEX_API).addPathComponent("manga").addQueryParameter("limit",20).addQueryParameter("order",{followedCount:"desc"}).addQueryParameter("contentRating",n).addQueryParameter("includes",["cover_art"]).buildUrl(),method:"GET"}),section:createHomeSection({id:"popular",title:"Popular",view_more:!0})},r.t7={request:createRequestObject({url:new X(t.MANGADEX_API).addPathComponent("chapter").addQueryParameter("limit",100).addQueryParameter("order",{publishAt:"desc"}).addQueryParameter("translatedLanguage",i).addQueryParameter("includes",["manga"]).addQueryParameter("includeFutureUpdates","0").buildUrl(),method:"GET"}),section:createHomeSection({id:"latest_updates",title:"Latest Updates",view_more:!0})},c=[r.t5,r.t6,r.t7],s=!0,l=!1,p=void 0,r.prev=22,f=function(r,i){var c=i.value;u.includes(c.section.id)&&(e(c.section),o.push(t.requestManager.schedule(c.request,1).then(function(){var r=Re(a().mark((function r(i){var o,u;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==(o="string"===typeof i.data?JSON.parse(i.data):i.data).data){r.next=3;break}throw new Error("Failed to parse json results for section ".concat(c.section.title));case 3:r.t0=c.section.id,r.next="latest_updates"===r.t0?6:13;break;case 6:return r.next=8,t.getCoversMapping(o.data.map((function(e){return e.relationships.filter((function(e){return"manga"==e.type})).map((function(e){return e.id}))[0]})),n);case 8:return u=r.sent,r.next=11,Ce(o.data,u,t,ue,n);case 11:return c.section.items=r.sent,r.abrupt("break",16);case 13:return r.next=15,Pe(o.data,t,ue);case 15:c.section.items=r.sent;case 16:e(c.section);case 17:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())))},h=c[Symbol.iterator]();!(s=(m=h.next()).done);s=!0)f(0,m);r.next=31;break;case 27:r.prev=27,r.t8=r.catch(22),l=!0,p=r.t8;case 31:r.prev=31,r.prev=32,s||null==h.return||h.return();case 34:if(r.prev=34,!l){r.next=37;break}throw p;case 37:return r.finish(34);case 38:return r.finish(31);case 39:return r.next=41,xe(t.stateManager);case 41:if(!r.sent){r.next=63;break}return r.next=44,$(t.stateManager);case 44:for(v=r.sent,g=!0,b=!1,y=void 0,r.prev=46,x=function(r,i){var u=i.value,c=createRequestObject({url:"".concat("https://framboisepi.github.io/SimilarData","/similar/").concat(u,".json"),method:"GET"});o.push(t.requestManager.schedule(c,1).then(function(){var r=Re(a().mark((function r(i){var o,c,s,l,d,p,f,h,m,v,g,b,y;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(200===i.status){r.next=4;break}console.log("Could not fetch similar titles for id: ".concat(u,", request failed with status ").concat(i.status)),r.next=65;break;case 4:if(void 0!==(o="string"===typeof i.data?JSON.parse(i.data):i.data).id){r.next=9;break}console.log("Could not fetch similar titles for id: "+u+", json is invalid"),r.next=65;break;case 9:if(c=createHomeSection({id:u,title:"More like "+t.decodeHTMLEntity(o.title.en),view_more:!1}),e(c),s=[],"unknown"!==o.coverFileName){r.next=17;break}l="https://mangadex.org/_nuxt/img/cover-placeholder.d12c3c5.jpg",r.next=24;break;case 17:return r.t0="".concat(Qe,"/").concat(u,"/").concat(o.coverFileName),r.t1=J,r.next=21,se(t.stateManager);case 21:r.t2=r.sent,r.t3=r.t1.getEnding.call(r.t1,r.t2),l=r.t0.concat.call(r.t0,r.t3);case 24:s.push(createMangaTile({id:u,title:createIconText({text:null!==(d=t.decodeHTMLEntity(o.title.en))&&void 0!==d?d:"No Title"}),image:l})),p=!0,f=!1,h=void 0,r.prev=27,m=o.matches[Symbol.iterator]();case 29:if(p=(v=m.next()).done){r.next=49;break}if(g=v.value,!n.includes(g.contentRating)){r.next=46;break}if(b=void 0,"unknown"!==g.coverFileName){r.next=37;break}b="https://mangadex.org/_nuxt/img/cover-placeholder.d12c3c5.jpg",r.next=44;break;case 37:return r.t4="".concat(Qe,"/").concat(g.id,"/").concat(g.coverFileName),r.t5=J,r.next=41,se(t.stateManager);case 41:r.t6=r.sent,r.t7=r.t5.getEnding.call(r.t5,r.t6),b=r.t4.concat.call(r.t4,r.t7);case 44:s.push(createMangaTile({id:g.id,title:createIconText({text:null!==(y=t.decodeHTMLEntity(g.title.en))&&void 0!==y?y:"No Title"}),subtitleText:createIconText({text:"Similarity ".concat(g.score.toFixed(2))}),image:b}));case 46:p=!0,r.next=29;break;case 49:r.next=55;break;case 51:r.prev=51,r.t8=r.catch(27),f=!0,h=r.t8;case 55:r.prev=55,r.prev=56,p||null==m.return||m.return();case 58:if(r.prev=58,!f){r.next=61;break}throw h;case 61:return r.finish(58);case 62:return r.finish(55);case 63:c.items=s,e(c);case 65:case"end":return r.stop()}}),r,null,[[27,51,55,63],[56,,58,62]])})));return function(e){return r.apply(this,arguments)}}()))},w=v[Symbol.iterator]();!(g=(k=w.next()).done);g=!0)x(0,k);r.next=55;break;case 51:r.prev=51,r.t9=r.catch(46),b=!0,y=r.t9;case 55:r.prev=55,r.prev=56,g||null==w.return||w.return();case 58:if(r.prev=58,!b){r.next=61;break}throw y;case 61:return r.finish(58);case 62:return r.finish(55);case 63:return r.next=65,Promise.all(o);case 65:case"end":return r.stop()}}),r,null,[[22,27,31,39],[32,,34,38],[46,51,55,63],[56,,58,62]])})))()},n.getViewMoreItems=function(e,t){var r=this;return Re(a().mark((function n(){var i,o,u,c,s,l,d,p,f,h,m,v;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=null!==(i=null===t||void 0===t?void 0:t.offset)&&void 0!==i?i:0,c=null!==(u=null===t||void 0===t?void 0:t.collectedIds)&&void 0!==u?u:[],s=[],n.next=7,ne(r.stateManager);case 7:return l=n.sent,n.next=10,re(r.stateManager);case 10:d=n.sent,p="",n.t0=e,n.next="popular"===n.t0?15:"latest_updates"===n.t0?17:19;break;case 15:return p=new X(r.MANGADEX_API).addPathComponent("manga").addQueryParameter("limit",100).addQueryParameter("order",{followedCount:"desc"}).addQueryParameter("offset",o).addQueryParameter("contentRating",l).addQueryParameter("includes",["cover_art"]).buildUrl(),n.abrupt("break",19);case 17:return p=new X(r.MANGADEX_API).addPathComponent("chapter").addQueryParameter("limit",100).addQueryParameter("offset",o).addQueryParameter("order",{publishAt:"desc"}).addQueryParameter("translatedLanguage",d).addQueryParameter("includes",["manga"]).addQueryParameter("includeFutureUpdates","0").buildUrl(),n.abrupt("break",19);case 19:return f=createRequestObject({url:p,method:"GET"}),n.next=22,r.requestManager.schedule(f,1);case 22:if(h=n.sent,void 0!==(m="string"===typeof h.data?JSON.parse(h.data):h.data).data){n.next=26;break}throw new Error("Failed to parse json results for getViewMoreItems");case 26:n.t1=e,n.next="latest_updates"===n.t1?29:36;break;case 29:return n.next=31,r.getCoversMapping(m.data.map((function(e){return e.relationships.filter((function(e){return"manga"==e.type})).map((function(e){return e.id}))[0]})),l);case 31:return v=n.sent,n.next=34,Ce(m.data,v,r,ue,l);case 34:return s=n.sent,n.abrupt("break",39);case 36:return n.next=38,Pe(m.data,r,ue);case 38:s=n.sent;case 39:return n.abrupt("return",createPagedResults({results:s,metadata:{offset:o+100,collectedIds:c}}));case 40:case"end":return n.stop()}}),n)})))()},n.filterUpdatedManga=function(e,t,r){var n=this;return Re(a().mark((function i(){var o,u,c,s,l,d,p,f,h,m,v,g,b,y,x,w,k,S;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=0,u=100,c=!0,s=[],l=t.toISOString().split(".")[0],a.next=7,re(n.stateManager);case 7:d=a.sent;case 8:if(!c){a.next=42;break}return p=createRequestObject({url:new X(n.MANGADEX_API).addPathComponent("chapter").addQueryParameter("limit",100).addQueryParameter("offset",o).addQueryParameter("publishAtSince",l).addQueryParameter("order",{publishAt:"desc"}).addQueryParameter("translatedLanguage",d).addQueryParameter("includeFutureUpdates","0").buildUrl(),method:"GET"}),a.next=12,n.requestManager.schedule(p,1);case 12:if(204!=(f=a.sent).status){a.next=15;break}return a.abrupt("return");case 15:if(void 0!==(h="string"===typeof f.data?JSON.parse(f.data):f.data).data){a.next=19;break}return console.log("Failed to parse JSON results for filterUpdatedManga using the date ".concat(l," and the offset ").concat(o)),a.abrupt("return");case 19:for(m=[],v=!0,g=!1,b=void 0,a.prev=21,y=h.data[Symbol.iterator]();!(v=(x=y.next()).done);v=!0)w=x.value,S=null===(k=w.relationships.filter((function(e){return"manga"==e.type}))[0])||void 0===k?void 0:k.id,r.includes(S)&&!s.includes(S)&&(m.push(S),s.push(S));a.next=29;break;case 25:a.prev=25,a.t0=a.catch(21),g=!0,b=a.t0;case 29:a.prev=29,a.prev=30,v||null==y.return||y.return();case 32:if(a.prev=32,!g){a.next=35;break}throw b;case 35:return a.finish(32);case 36:return a.finish(29);case 37:o+=100,(h.total<=o||o>=100*u)&&(c=!1),m.length>0&&e(createMangaUpdates({ids:m})),a.next=8;break;case 42:e(createMangaUpdates({ids:[]}));case 43:case"end":return a.stop()}}),i,null,[[21,25,29,37],[30,,32,36]])})))()},n.decodeHTMLEntity=function(e){if(void 0!=e)return G.p1(e)},r}(y));function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Xe=new(function(){function e(){Ve(this,e),this.Languages=[{name:"Include All",NHCode:"",PBCode:d.LanguageCode.UNKNOWN,default:!0},{name:"English",NHCode:"english",PBCode:d.LanguageCode.ENGLISH},{name:"\u65e5\u672c\u8a9e",NHCode:"japanese",PBCode:d.LanguageCode.JAPANESE},{name:"\u4e2d\u6587 (\u7b80\u5316\u5b57)",NHCode:"chinese",PBCode:d.LanguageCode.CHINEESE}],this.Languages=this.Languages.sort((function(e,t){return e.name>t.name?1:-1}))}var t=e.prototype;return t.getNHCodeList=function(){return this.Languages.map((function(e){return e.NHCode}))},t.getName=function(e){var t,r;return null!==(r=null===(t=this.Languages.filter((function(t){return t.NHCode==e}))[0])||void 0===t?void 0:t.name)&&void 0!==r?r:"Unknown"},t.getPBCode=function(e){var t,r;return null!==(r=null===(t=this.Languages.filter((function(t){return t.NHCode==e}))[0])||void 0===t?void 0:t.PBCode)&&void 0!==r?r:d.LanguageCode.UNKNOWN},t.getDefault=function(){return this.Languages.filter((function(e){return e.default})).map((function(e){return e.NHCode}))},e}()),Je=new(function(){function e(){Ve(this,e),this.SortOrders=[{name:"Popular all-time",NHCode:"popular",shortcuts:["s:p","s:popular","sort:p","sort:popular"],default:!0},{name:"Popular this week",NHCode:"popular-week",shortcuts:["s:pw","s:w","s:popular-week","sort:pw","sort:w","sort:popular-week"]},{name:"Popular today",NHCode:"popular-today",shortcuts:["s:pt","s:t","s:popular-today","sort:pt","sort:t","sort:popular-today"]},{name:"Recent",NHCode:"date",shortcuts:["s:r","s:recent","sort:r","sort:recent"]}],this.SortOrders=this.SortOrders.sort((function(e,t){return e.name>t.name?1:-1}))}var t=e.prototype;return t.containsShortcut=function(e){var t=!0,r=!1,n=void 0;try{for(var a,i=this.SortOrders[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value,u=!0,c=!1,s=void 0;try{for(var l,d=o.shortcuts[Symbol.iterator]();!(u=(l=d.next()).done);u=!0){var p=l.value;if(e.includes(p))return[o.NHCode,p]}}catch(f){c=!0,s=f}finally{try{u||null==d.return||d.return()}finally{if(c)throw s}}}}catch(f){r=!0,n=f}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return["",""]},t.getNHCodeList=function(){return this.SortOrders.map((function(e){return e.NHCode}))},t.getName=function(e){var t,r;return null!==(r=null===(t=this.SortOrders.filter((function(t){return t.NHCode==e}))[0])||void 0===t?void 0:t.name)&&void 0!==r?r:"Unknown"},t.getDefault=function(){return this.SortOrders.filter((function(e){return e.default})).map((function(e){return e.NHCode}))},e}()),Ye={j:"jpg",p:"png",g:"gif"},We=function(e){var t;return null!==(t=Ye[e.t])&&void 0!==t?t:""},$e=function(e){var t=e.tags,r=!0,n=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;if("language"===u.type&&"translated"!==u.name)return u.name}}catch(c){n=!0,a=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return""},ze=function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,o=e.tags[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;"tag"===u.type&&t.push(createTag({id:u.id.toString(),label:u.name}))}}catch(s){n=!0,a=s}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}var c=function(e){var t=e.tags,r=!0,n=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;if("artist"===u.type)return u.name}}catch(s){n=!0,a=s}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return""}(e);return createManga({id:e.id.toString(),titles:[e.title.english,e.title.japanese,e.title.pretty],artist:c,author:c,image:"https://t.nhentai.net/galleries/".concat(e.media_id,"/cover.").concat(We(e.images.cover)),rating:0,status:d.MangaStatus.COMPLETED,follows:e.num_favorites,tags:[createTagSection({id:"tags",label:"Tags",tags:t})],hentai:!0})},Ze=function(e,t){return createChapterDetails({id:t,mangaId:t,longStrip:!1,pages:e.images.pages.map((function(t,r){var n=We(t);return"https://i.nhentai.net/galleries/".concat(e.media_id,"/").concat(r+1,".").concat(n)}))})},Ke=function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,o=e.result[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;t.push(createMangaTile({id:u.id.toString(),image:"https://t.nhentai.net/galleries/".concat(u.media_id,"/cover.").concat(We(u.images.cover)),subtitleText:createIconText({text:Xe.getName($e(u))}),title:createIconText({text:u.title.pretty})}))}}catch(c){n=!0,a=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return t},et=function(e,t){return createChapter({id:t,mangaId:t,chapNum:1,name:e.title.english,langCode:Xe.getPBCode($e(e)),time:new Date(1e3*e.upload_date)})};function tt(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,a)}function rt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){tt(i,n,a,o,u,"next",e)}function u(e){tt(i,n,a,o,u,"throw",e)}o(void 0)}))}}var nt=function(){var e=rt(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("languages");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=Xe.getDefault();case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=rt(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("extra_args");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2="";case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=rt(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("sort_order");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=Je.getDefault();case 12:return e.abrupt("return",e.t2);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(e){return createButton({id:"reset",label:"Reset to Default",value:"",onTap:rt(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.store("languages",null),e.store("sort_order",null),e.store("extra_args",null)]);case 2:case"end":return t.stop()}}),t)})))})};function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,a)}function lt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){st(i,n,a,o,u,"next",e)}function u(e){st(i,n,a,o,u,"throw",e)}o(void 0)}))}}function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){pt(e,t,r[t])}))}return e}function mt(e,t){return!t||"object"!==bt(t)&&"function"!==typeof t?ct(e):t}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(c){u=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ut(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var bt=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function yt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ft(e);if(t){var a=ft(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return mt(this,r)}}var xt="https://nhentai.net",wt=xt+"/api",kt=(d.ContentRating.ADULT,d.TagType.YELLOW,d.TagType.RED,function(){var e=lt(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.retrieve("languages");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2="";case 12:if(""!=(n=e.t2)){e.next=17;break}return e.abrupt("return",'""');case 17:return e.abrupt("return","language:".concat(n));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),St=function(){var e=lt(a().mark((function e(t,r){var n,i,o,u,c,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Je.containsShortcut(t),0===(null===(n=i[0])||void 0===n?void 0:n.length)){e.next=7;break}return e.abrupt("return",[null!==(o=i[0])&&void 0!==o?o:"",t.replace(null!==(u=i[1])&&void 0!==u?u:"","")]);case 7:return e.next=10,r.retrieve("sort_order");case 10:if(e.t1=c=e.sent,e.t0=null!==e.t1,!e.t0){e.next=14;break}e.t0=void 0!==c;case 14:if(!e.t0){e.next=18;break}e.t2=c,e.next=19;break;case 18:e.t2=Je.getDefault();case 19:return s=e.t2,e.abrupt("return",[s,t]);case 21:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Mt=function(){var e=lt(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(t);case 2:return r=e.sent,e.abrupt("return"," ".concat(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tt="Mozilla/5.0 (Macintosh; Intel Mac OS X 12_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Safari/605.1.15",Pt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(r,e);var t=yt(r);function r(){var e;dt(this,r),(e=t.apply(this,arguments)).id="nhentai",e.name="NhenTai",e.icon="Nhentai.png",e.description="Nh\u1ec7n t\xe1i tu\u1ed5i th\u01a1.",e.contentRating=d.ContentRating.ADULT,e.websiteBaseURL="https://nhentai.net",e.language=d.LanguageCode.ENGLISH;var n=ct(e);return e.getSection=function(){var e=lt(a().mark((function e(t,r){var i,o,u,c,s,l,d,p,f,h,m,v,g,b,y,x,w,k,S;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="top"===e.t0?3:"new_romcom"===e.t0?6:51;break;case 3:return e.next=5,n.getViewMoreItems("popular",{page:r});case 5:return e.abrupt("return",e.sent);case 6:return i=createRequestObject({url:"https://wholesomelist.com/list?tierabove=S-",method:"GET"}),e.next=9,n.requestManager.schedule(i,1);case 9:o=e.sent,u=n.cheerio.load(o.data),c=[],s=!0,l=!1,d=void 0,e.prev=13,p=u('tr[id$="row"]').toArray()[Symbol.iterator]();case 15:if(s=(f=p.next()).done){e.next=36;break}if(h=f.value,g=u("td",h).last().text().trim(),u("td.dt-center.dt-nowrap",h).text().trim().includes("S")){e.next=22;break}return e.abrupt("continue",33);case 22:if(!g.includes("Yaoi")&&!g.includes("Yuri")){e.next=24;break}return e.abrupt("continue",33);case 24:if(0!==(b=u("td[data-export^='https://nhentai.net/g/']",h)).toArray().length){e.next=27;break}return e.abrupt("continue",33);case 27:y=u("a.internal-link",h),x="https://wholesomelist.com/asset/"+(null===(m=y.attr("href"))||void 0===m?void 0:m.split("/")[2])+".jpg",w=y.text().trim(),S=null!==(k=null===(v=b.attr("data-export"))||void 0===v?void 0:v.split("/")[4])&&void 0!==k?k:"",c.push(createMangaTile({id:S,image:x,title:createIconText({text:w}),subtitleText:createIconText({text:g})}));case 33:s=!0,e.next=15;break;case 36:e.next=42;break;case 38:e.prev=38,e.t1=e.catch(13),l=!0,d=e.t1;case 42:e.prev=42,e.prev=43,s||null==p.return||p.return();case 45:if(e.prev=45,!l){e.next=48;break}throw d;case 48:return e.finish(45);case 49:return e.finish(42);case 50:return e.abrupt("return",createPagedResults({results:c}));case 51:return e.next=53,n.getViewMoreItems(t,{page:r});case 53:return e.abrupt("return",e.sent);case 54:case"end":return e.stop()}}),e,null,[[13,38,42,50],[43,,45,49]])})));return function(t,r){return e.apply(this,arguments)}}(),e.requestManager=createRequestManager({requestsPerSecond:3,requestTimeout:15e3,interceptor:{interceptRequest:function(){var e=lt(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.headers=ht({},null!==(r=t.headers)&&void 0!==r?r:{},{"user-agent":Tt,referer:"".concat(xt,"/")}),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),interceptResponse:function(){var e=lt(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),e.stateManager=createSourceStateManager({}),e}var n=r.prototype;return n.getSourceMenu=function(){var e=this;return lt(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve(createSection({id:"main",header:"Source Settings",rows:function(){return Promise.resolve([(t=e.stateManager,createNavigationButton({id:"settings",value:"",label:"Content Settings",form:createForm({onSubmit:function(){var e=rt(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.store("languages",r.languages),t.store("sort_order",r.sort_order),t.store("extra_args",r.extra_args.replace(/[\u201c\u201d\u2018\u2019]/g,'"'))]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validate:rt(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),sections:function(){return Promise.resolve([createSection({id:"content",footer:"Modify the nhentai experience to your liking.",rows:function(){return Promise.all([nt(t),it(t),at(t)]).then(function(){var e=rt(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[createSelect({id:"languages",label:"Languages",options:Xe.getNHCodeList(),displayLabel:function(e){return Xe.getName(e)},value:t[0],allowsMultiselect:!1,minimumOptionCount:1}),createSelect({id:"sort_order",label:"Default search sort",options:Je.getNHCodeList(),displayLabel:function(e){return Je.getName(e)},value:t[1],allowsMultiselect:!1,minimumOptionCount:1}),createInputField({id:"extra_args",label:"Additional arguments",placeholder:"woman -lolicon -shotacon -yaoi",maskInput:!1,value:t[2]})]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})])}})})),ot(e.stateManager)]);var t}})));case 1:case"end":return t.stop()}}),t)})))()},n.getMangaShareUrl=function(e){return"".concat(xt,"/g/").concat(e)},n.getMangaDetails=function(e){var t=this;return lt(a().mark((function r(){var n,i,o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=createRequestObject({url:"".concat(wt,"/gallery/").concat(e),method:"GET"}),r.next=3,t.requestManager.schedule(n,1);case 3:return i=r.sent,t.CloudFlareError(i.status),o="string"==typeof i.data?JSON.parse(i.data):i.data,r.abrupt("return",ze(o));case 7:case"end":return r.stop()}}),r)})))()},n.getChapters=function(e){var t=this;return lt(a().mark((function r(){var n,i,o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=createRequestObject({url:"".concat(wt,"/gallery/").concat(e),method:"GET"}),r.next=3,t.requestManager.schedule(n,1);case 3:return i=r.sent,t.CloudFlareError(i.status),o="string"==typeof i.data?JSON.parse(i.data):i.data,r.abrupt("return",[et(o,e)]);case 7:case"end":return r.stop()}}),r)})))()},n.getChapterDetails=function(e){var t=this;return lt(a().mark((function r(){var n,i,o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=createRequestObject({url:"".concat(wt,"/gallery/").concat(e),method:"GET"}),r.next=3,t.requestManager.schedule(n,1);case 3:return i=r.sent,t.CloudFlareError(i.status),o="string"==typeof i.data?JSON.parse(i.data):i.data,r.abrupt("return",Ze(o,e));case 7:case"end":return r.stop()}}),r)})))()},n.getSearchResults=function(e,t){var r=this;return lt(a().mark((function n(){var i,o,u,c,s,l,d,p,f,h,m,v,g,b,y,x;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=null!==(i=null===t||void 0===t?void 0:t.page)&&void 0!==i?i:1,c=null!==(u=e.title)&&void 0!==u?u:"",null===(s=null===t||void 0===t?void 0:t.stopSearch)||void 0===s||!s){n.next=7;break}return n.abrupt("return",createPagedResults({results:[],metadata:{stopSearch:!0}}));case 7:if(!/^\d+$/.test(c)){n.next=17;break}return l=createRequestObject({url:"".concat(wt,"/gallery/").concat(c),method:"GET"}),n.next=11,r.requestManager.schedule(l,1);case 11:return d=n.sent,r.CloudFlareError(d.status),p="string"==typeof d.data?JSON.parse(d.data):d.data,n.abrupt("return",createPagedResults({results:Ke({result:[p],num_pages:1,per_page:1}),metadata:{page:o+1,stopSearch:!0}}));case 17:return n.t0=c+" ",n.next=20,kt(r.stateManager);case 20:return n.t1=n.sent,n.t2=n.t0+n.t1,n.next=24,Mt(r.stateManager);case 24:return n.t3=n.sent,f=n.t2+n.t3,n.t4=gt,n.next=30,St(f,r.stateManager);case 30:if(n.t6=h=n.sent,n.t5=null!==n.t6,!n.t5){n.next=34;break}n.t5=void 0!==h;case 34:if(!n.t5){n.next=38;break}n.t7=h,n.next=39;break;case 38:n.t7=["",f];case 39:return n.t8=n.t7,m=(0,n.t4)(n.t8,2),v=m[0],g=m[1],b=createRequestObject({url:"".concat(wt,"/galleries/search?query=").concat(encodeURIComponent(null!==g&&void 0!==g?g:""),"&sort=").concat(v,"&page=").concat(o),method:"GET"}),n.next=46,r.requestManager.schedule(b,1);case 46:return y=n.sent,r.CloudFlareError(y.status),x="string"==typeof y.data?JSON.parse(y.data):y.data,n.abrupt("return",createPagedResults({results:Ke(x),metadata:{page:o+1}}));case 50:case"end":return n.stop()}}),n)})))()},n.getHomePageSections=function(e){var t=this;return lt(a().mark((function r(){var n,i,o,u,c,s,l,d,p,f,h,m,v,g;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=createHomeSection({id:"date",title:"Recent",view_more:!0}),i=createHomeSection({id:"popular-today",title:"Popular Today",view_more:!0}),o=createHomeSection({id:"popular-week",title:"Popular Week",view_more:!0}),u=createHomeSection({id:"popular",title:"Popular All-time",view_more:!0}),c=[n,i,o,u],s=!0,l=!1,d=void 0,r.prev=6,p=c[Symbol.iterator]();case 8:if(s=(f=p.next()).done){r.next=35;break}return h=f.value,e(h),r.t0=createRequestObject,r.t1="".concat(wt,"/galleries/search?query="),r.t2=encodeURIComponent,r.next=16,kt(t.stateManager);case 16:return r.t3=r.sent,r.next=19,Mt(t.stateManager);case 19:return r.t4=r.sent,r.t5=r.t3+r.t4,r.t6=(0,r.t2)(r.t5),r.t7=r.t1.concat.call(r.t1,r.t6,"&sort=").concat(h.id),r.t8={url:r.t7,method:"GET"},m=(0,r.t0)(r.t8),r.next=27,t.requestManager.schedule(m,1);case 27:v=r.sent,t.CloudFlareError(v.status),g="string"==typeof v.data?JSON.parse(v.data):v.data,h.items=Ke(g),e(h);case 32:s=!0,r.next=8;break;case 35:r.next=41;break;case 37:r.prev=37,r.t9=r.catch(6),l=!0,d=r.t9;case 41:r.prev=41,r.prev=42,s||null==p.return||p.return();case 44:if(r.prev=44,!l){r.next=47;break}throw d;case 47:return r.finish(44);case 48:return r.finish(41);case 49:case"end":return r.stop()}}),r,null,[[6,37,41,49],[42,,44,48]])})))()},n.getViewMoreItems=function(e,t){var r=this;return lt(a().mark((function n(){var i,o,u,c,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=null!==(i=null===t||void 0===t?void 0:t.page)&&void 0!==i?i:1,n.t0=createRequestObject,n.t1="".concat(wt,"/galleries/search?query="),n.t2=encodeURIComponent,n.next=7,kt(r.stateManager);case 7:return n.t3=n.sent,n.next=10,Mt(r.stateManager);case 10:return n.t4=n.sent,n.t5=n.t3+n.t4,n.t6=(0,n.t2)(n.t5),n.t7=n.t1.concat.call(n.t1,n.t6,"&sort=").concat(e,"&page=").concat(o),n.t8={url:n.t7,method:"GET"},u=(0,n.t0)(n.t8),n.next=18,r.requestManager.schedule(u,1);case 18:return c=n.sent,r.CloudFlareError(c.status),s="string"==typeof c.data?JSON.parse(c.data):c.data,o++,n.abrupt("return",createPagedResults({results:Ke(s),metadata:{page:o}}));case 23:case"end":return n.stop()}}),n)})))()},n.getCloudflareBypassRequest=function(){return createRequestObject({url:xt,method:"GET",headers:{"user-agent":Tt,referer:"".concat(xt,".")}})},n.CloudFlareError=function(e){if(503==e)throw new Error("CLOUDFLARE BYPASS ERROR:\nPlease go to Settings > Sources > <The name of this source> and press Cloudflare Bypass")},r}(y);var Ct="http://www.nettruyenn.com/",Et=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t=e.prototype;return t.convertTime=function(e){var t,r,n=Number((null!==(r=/\d*/.exec(e))&&void 0!==r?r:[])[0]);if(n=0==n&&e.includes("a")?1:n,e.includes("gi\xe2y")||e.includes("secs"))t=new Date(Date.now()-1e3*n);else if(e.includes("ph\xfat"))t=new Date(Date.now()-6e4*n);else if(e.includes("gi\u1edd"))t=new Date(Date.now()-36e5*n);else if(e.includes("ng\xe0y"))t=new Date(Date.now()-864e5*n);else if(e.includes("n\u0103m"))t=new Date(Date.now()-31556952e3*n);else if(e.includes(":")){var a=e.split(" "),i=a[0],o=a[1].split("/"),u=o[1]+"/"+o[0]+"/"+(new Date).getFullYear();t=new Date(u+" "+i)}else{var c=e.split("/");t=new Date(c[1]+"/"+c[0]+"/20"+c[2])}return t},t.parseMangaDetails=function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e("li.kind > p.col-xs-8 > a").toArray()[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c,s,d=o.value,p=e(d).text(),f=null!==(s=null===(c=e(d).attr("href"))||void 0===c?void 0:c.split("/")[4])&&void 0!==s?s:p;r.push(createTag({label:p,id:f}))}}catch(g){a=!0,i=g}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}var h,m=e("ul.list-info > li.author > p.col-xs-8").text(),v="http:"+e("div.col-image > img").attr("src");return createManga({id:t,author:m,artist:m,desc:e("div.detail-content > p").text(),titles:[e("h1.title-detail").text()],image:null!==(h=l(v,Ct))&&void 0!==h?h:"",status:e("li.status > p.col-xs-8").text().toLowerCase().includes("ho\xe0n th\xe0nh")?0:1,rating:parseFloat(e('span[itemprop="ratingValue"]').text()),hentai:!1,tags:[createTagSection({label:"genres",tags:r,id:"0"})]})},t.parseChapterList=function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e("div.list-chapter > nav > ul > li.row:not(.heading)").toArray()[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=o.value,s=e("div.col-xs-4",c).text(),l=e("div.col-xs-3",c).text(),p=e("div.chapter a",c).text(),f=parseFloat(e("div.chapter a",c).text().split(" ")[1]),h=this.convertTime(s);r.push(createChapter({id:e("div.chapter a",c).attr("href").split("/")[6],chapNum:f,name:p.includes(":")?p.split("Chapter "+f+":")[1].trim():"",mangaId:t,langCode:d.LanguageCode.VIETNAMESE,time:h,group:l+" l\u01b0\u1ee3t xem"}))}}catch(m){a=!0,i=m}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r},t.parseChapterDetails=function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,o=e("div.reading-detail > div.page-chapter > img").toArray()[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;if(u.attribs["data-original"]){var c=u.attribs["data-original"];-1===c.indexOf("http")?t.push("http:"+u.attribs["data-original"]):t.push(c)}}}catch(s){n=!0,a=s}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return t},t.parseSearchResults=function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,o=e("div.item","div.row").toArray()[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u,c=i.value,s=e("figure.clearfix > figcaption > h3 > a",c).first().text(),d=null===(u=e("figure.clearfix > div.image > a",c).attr("href"))||void 0===u?void 0:u.split("/").pop(),p=e("figure.clearfix > div.image > a > img",c).first().attr("data-original"),f=e("figure.clearfix > figcaption > ul > li.chapter:nth-of-type(1) > a",c).last().text().trim();d&&s&&t.push(createMangaTile({id:d,image:p?l("http:"+p,Ct):"https://i.imgur.com/GYUxEX8.png",title:createIconText({text:s}),subtitleText:createIconText({text:f})}))}}catch(h){n=!0,a=h}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return t},t.parseTags=function(e){var t=[],r=[],n=[],a=[],i=[],o=!0,u=!1,c=void 0;try{for(var s,l=e("div.col-md-3.col-sm-4.col-xs-6.mrb10","div.col-sm-10 > div.row").toArray()[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var d,p=s.value,f=e("div.genre-item",p).text().trim(),h=null!==(d=e("div.genre-item > span",p).attr("data-id"))&&void 0!==d?d:f;h&&f&&t.push({id:h,label:f})}}catch(z){u=!0,c=z}finally{try{o||null==l.return||l.return()}finally{if(u)throw c}}var m=!0,v=!1,g=void 0;try{for(var b,y=e("option","select.select-minchapter").toArray()[Symbol.iterator]();!(m=(b=y.next()).done);m=!0){var x,w=b.value,k=e(w).text().trim(),S=null!==(x="minchapter."+e(w).attr("value"))&&void 0!==x?x:k;S&&k&&r.push({id:S,label:k})}}catch(z){v=!0,g=z}finally{try{m||null==y.return||y.return()}finally{if(v)throw g}}var M=!0,T=!1,P=void 0;try{for(var C,E=e("option",".select-status").toArray()[Symbol.iterator]();!(M=(C=E.next()).done);M=!0){var O,_=C.value,R=e(_).text().trim(),j=null!==(O="status."+e(_).attr("value"))&&void 0!==O?O:R;j&&R&&n.push({id:j,label:R})}}catch(z){T=!0,P=z}finally{try{M||null==E.return||E.return()}finally{if(T)throw P}}var A=!0,I=!1,D=void 0;try{for(var N,L=e("option",".select-gender").toArray()[Symbol.iterator]();!(A=(N=L.next()).done);A=!0){var q,B=N.value,U=e(B).text().trim(),G=null!==(q="gender."+e(B).attr("value"))&&void 0!==q?q:U;G&&U&&a.push({id:G,label:U})}}catch(z){I=!0,D=z}finally{try{A||null==L.return||L.return()}finally{if(I)throw D}}var H=!0,Q=!1,F=void 0;try{for(var V,X=e("option",".select-sort").toArray()[Symbol.iterator]();!(H=(V=X.next()).done);H=!0){var J,Y=V.value,W=e(Y).text().trim(),$=null!==(J="sort."+e(Y).attr("value"))&&void 0!==J?J:W;$&&W&&i.push({id:$,label:W})}}catch(z){Q=!0,F=z}finally{try{H||null==X.return||X.return()}finally{if(Q)throw F}}return[createTagSection({id:"0",label:"Th\u1ec3 Lo\u1ea1i (C\xf3 th\u1ec3 ch\u1ecdn nhi\u1ec1u h\u01a1n 1)",tags:t.map((function(e){return createTag(e)}))}),createTagSection({id:"1",label:"S\u1ed1 L\u01b0\u1ee3ng Chapter (Ch\u1ec9 ch\u1ecdn 1)",tags:r.map((function(e){return createTag(e)}))}),createTagSection({id:"2",label:"T\xecnh Tr\u1ea1ng (Ch\u1ec9 ch\u1ecdn 1)",tags:n.map((function(e){return createTag(e)}))}),createTagSection({id:"3",label:"D\xe0nh Cho (Ch\u1ec9 ch\u1ecdn 1)",tags:a.map((function(e){return createTag(e)}))}),createTagSection({id:"4",label:"S\u1eafp x\u1ebfp theo (Ch\u1ec9 ch\u1ecdn 1)",tags:i.map((function(e){return createTag(e)}))})]},t.parseFeaturedSection=function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,o=e("div.item","div.altcontent1").toArray()[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u,c=i.value,s=e(".slide-caption > h3 > a",c).text(),l=null===(u=e("a",c).attr("href"))||void 0===u?void 0:u.split("/").pop(),d=e("a > img.lazyOwl",c).attr("data-src"),p=e(".slide-caption > a",c).text().trim()+" - "+e(".slide-caption > .time",c).text().trim();l&&s&&t.push(createMangaTile({id:l,image:d?"http:"+d:"https://i.imgur.com/GYUxEX8.png",title:createIconText({text:s}),subtitleText:createIconText({text:p})}))}}catch(f){n=!0,a=f}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return t},t.parsePopularSection=function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,o=e("div.item","div.row").toArray().splice(0,20)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u,c=i.value,s=e("figure.clearfix > figcaption > h3 > a",c).first().text(),l=null===(u=e("figure.clearfix > div.image > a",c).attr("href"))||void 0===u?void 0:u.split("/").pop(),d=e("figure.clearfix > div.image > a > img",c).first().attr("data-original"),p=e("figure.clearfix > figcaption > ul > li.chapter:nth-of-type(1) > a",c).last().text().trim();l&&s&&t.push(createMangaTile({id:l,image:d?"http:"+d:"https://i.imgur.com/GYUxEX8.png",title:createIconText({text:s}),subtitleText:createIconText({text:p})}))}}catch(f){n=!0,a=f}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return t},t.parseHotSection=function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,o=e("div.item","div.row").toArray().splice(0,20)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u,c=i.value,s=e("figure.clearfix > figcaption > h3 > a",c).first().text(),l=null===(u=e("figure.clearfix > div.image > a",c).attr("href"))||void 0===u?void 0:u.split("/").pop(),d=e("figure.clearfix > div.image > a > img",c).first().attr("data-original"),p=e("figure.clearfix > figcaption > ul > li.chapter:nth-of-type(1) > a",c).last().text().trim();l&&s&&t.push(createMangaTile({id:l,image:d?"http:"+d:"https://i.imgur.com/GYUxEX8.png",title:createIconText({text:s}),subtitleText:createIconText({text:p})}))}}catch(f){n=!0,a=f}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return t},t.parseNewUpdatedSection=function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,o=e("div.item","div.row").toArray().splice(0,20)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u,c=i.value,s=e("figure.clearfix > figcaption > h3 > a",c).first().text(),l=null===(u=e("figure.clearfix > div.image > a",c).attr("href"))||void 0===u?void 0:u.split("/").pop(),d=e("figure.clearfix > div.image > a > img",c).first().attr("data-original"),p=e("figure.clearfix > figcaption > ul > li.chapter:nth-of-type(1) > a",c).last().text().trim();l&&s&&t.push(createMangaTile({id:l,image:d?"http:"+d:"https://i.imgur.com/GYUxEX8.png",title:createIconText({text:s}),subtitleText:createIconText({text:p})}))}}catch(f){n=!0,a=f}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return t},t.parseNewAddedSection=function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,o=e("div.item","div.row").toArray().splice(0,20)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u,c=i.value,s=e("figure.clearfix > figcaption > h3 > a",c).first().text(),l=null===(u=e("figure.clearfix > div.image > a",c).attr("href"))||void 0===u?void 0:u.split("/").pop(),d=e("figure.clearfix > div.image > a > img",c).first().attr("data-original"),p=e("figure.clearfix > figcaption > ul > li.chapter:nth-of-type(1) > a",c).last().text().trim();l&&s&&t.push(createMangaTile({id:l,image:d?"http:"+d:"https://i.imgur.com/GYUxEX8.png",title:createIconText({text:s}),subtitleText:createIconText({text:p})}))}}catch(f){n=!0,a=f}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return t},t.parseFullSection=function(e){var t=[],r=!0,n=!1,a=void 0;try{for(var i,o=e("div.item","div.row").toArray().splice(0,20)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u,c=i.value,s=e("figure.clearfix > figcaption > h3 > a",c).first().text(),l=null===(u=e("figure.clearfix > div.image > a",c).attr("href"))||void 0===u?void 0:u.split("/").pop(),d=e("figure.clearfix > div.image > a > img",c).first().attr("data-original"),p=e("figure.clearfix > figcaption > ul > li.chapter:nth-of-type(1) > a",c).last().text().trim();l&&s&&t.push(createMangaTile({id:l,image:d?"http:"+d:"https://i.imgur.com/GYUxEX8.png",title:createIconText({text:s}),subtitleText:createIconText({text:p})}))}}catch(f){n=!0,a=f}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return t},t.parseViewMoreItems=function(e){var t=[],r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e("div.item","div.row").toArray()[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c,s=o.value,l=e("figure.clearfix > figcaption > h3 > a",s).first().text(),d=null===(c=e("figure.clearfix > div.image > a",s).attr("href"))||void 0===c?void 0:c.split("/").pop(),p=e("figure.clearfix > div.image > a > img",s).first().attr("data-original"),f=e("figure.clearfix > figcaption > ul > li.chapter:nth-of-type(1) > a",s).last().text().trim();d&&l&&(r.includes(d)||(t.push(createMangaTile({id:d,image:p?"http:"+p:"https://i.imgur.com/GYUxEX8.png",title:createIconText({text:l}),subtitleText:createIconText({text:f})})),r.push(d)))}}catch(h){a=!0,i=h}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return t},t.parseUpdatedManga=function(e,t,r){var n={ids:[]},a=!0,i=!1,o=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var s=u.value;r.includes(s.id)&&t<this.convertTime(s.time)&&n.ids.push(s.id)}}catch(l){i=!0,o=l}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}return n},e}();function Ot(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,a)}function _t(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Ot(i,n,a,o,u,"next",e)}function u(e){Ot(i,n,a,o,u,"throw",e)}o(void 0)}))}}function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function It(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){jt(e,t,r[t])}))}return e}function Dt(e,t){return!t||"object"!==Lt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Lt=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function qt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=At(e);if(t){var a=At(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Dt(this,r)}}var Bt="http://www.nettruyenn.com/",Ut=function(e){var t=e("ul.pagination > li.active > a").text(),r=e("ul.pagination > li.PagerSSCCells:last-child").text();return!t||+(r=null!==r&&void 0!==r?r:"")===+t},Gt=(d.ContentRating.MATURE,d.TagType.BLUE,d.TagType.GREEN,function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(r,e);var t=qt(r);function r(){var e;return Rt(this,r),(e=t.apply(this,arguments)).id="nettruyen",e.name="N\xe1tTruyen",e.icon="Nettruyen.png",e.description="M\u1ecdi ng\u01b0\u1eddi ch\xea r\xe1c nh\u01b0ng n\xf3 load \u1ea3nh nhanh.",e.websiteBaseURL="http://www.nettruyenn.com",e.contentRating=d.ContentRating.MATURE,e.language=d.LanguageCode.VIETNAMESE,e.getMangaInternalURL=function(t){return t.includes("/")&&(t=t.split("/")[1]),"/".concat(e.id,"/").concat(t)},e.getSection=function(t,r){var n="1,2,15,16,24,25,40,42,45,46,58,59".split(",").map((function(e){return{label:"",id:e}}));switch(t){case"top":return e.getViewMoreItems("hot",{page:r});case"new_romcom":return e.getSearchResults({includedTags:[{id:"35",label:"romance"}],excludedTags:n,parameters:{"":[""]}},{page:r});default:return e.getViewMoreItems(t,{page:r})}},e.parser=new Et,e.requestManager=createRequestManager({requestsPerSecond:5,requestTimeout:2e4,interceptor:{interceptRequest:function(){var e=_t(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.headers=It({},null!==(r=t.headers)&&void 0!==r?r:{},{}),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),interceptResponse:function(){var e=_t(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),e}var n=r.prototype;return n.getMangaShareUrl=function(e){return"".concat(Bt,"truyen-tranh/").concat(e)},n.getMangaDetails=function(e){var t=this;return _t(a().mark((function r(){var n,i,o,u;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n="".concat(Bt,"truyen-tranh/").concat(e),i=createRequestObject({url:n,method:"GET"}),r.next=4,t.requestManager.schedule(i,1);case 4:return o=r.sent,u=t.cheerio.load(o.data),r.abrupt("return",t.parser.parseMangaDetails(u,e));case 7:case"end":return r.stop()}}),r)})))()},n.getChapters=function(e){var t=this;return _t(a().mark((function r(){var n,i,o,u;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n="".concat(Bt,"truyen-tranh/").concat(e),i=createRequestObject({url:n,method:"GET"}),r.next=4,t.requestManager.schedule(i,1);case 4:return o=r.sent,u=t.cheerio.load(o.data),r.abrupt("return",t.parser.parseChapterList(u,e));case 7:case"end":return r.stop()}}),r)})))()},n.getChapterDetails=function(e,t){var r=this;return _t(a().mark((function n(){var i,o,u,c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=createRequestObject({url:"".concat(Bt,"/truyen-tranh/").concat(e.split("-").slice(0,-1).join("-"),"/abc/").concat(t),method:"GET"}),n.next=3,r.requestManager.schedule(i,1);case 3:return o=n.sent,u=r.cheerio.load(o.data),c=r.parser.parseChapterDetails(u),n.abrupt("return",createChapterDetails({pages:c.map((function(e){return l(e,Bt)})),longStrip:!1,id:t,mangaId:e}));case 7:case"end":return n.stop()}}),n)})))()},n.getSearchResults=function(e,t){var r=this;return _t(a().mark((function n(){var i,o,u,c,s,l,d,p,f,h,m,v,g,b,y,x,w;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=null!==(u=null===t||void 0===t?void 0:t.page)&&void 0!==u?u:1,s={genres:"",notgenres:"",gender:"-1",status:"-1",minchapter:"1",sort:"0"},d=null!==(l=null===(i=e.includedTags)||void 0===i?void 0:i.map((function(e){return e.id})))&&void 0!==l?l:[],f=null!==(p=null===(o=e.excludedTags)||void 0===o?void 0:o.map((function(e){return e.id})))&&void 0!==p?p:[],h=[],m=[],d.map((function(e){if(-1===e.indexOf("."))h.push(e);else switch(e.split(".")[0]){case"minchapter":s.minchapter=e.split(".")[1];break;case"gender":s.gender=e.split(".")[1];break;case"sort":s.sort=e.split(".")[1];break;case"status":s.status=e.split(".")[1]}})),f.forEach((function(e){return m.push(e)})),s.genres=(null!==h&&void 0!==h?h:[]).join(","),s.notgenres=(null!==m&&void 0!==m?m:[]).join(","),v="".concat(Bt),b=createRequestObject({url:e.title?v+"/tim-truyen":v+"/tim-truyen-nang-cao"+encodeURI("?keyword=".concat(null!==(g=e.title)&&void 0!==g?g:"","&genres=").concat(s.genres,"&notgenres=").concat(s.notgenres,"&gender=").concat(s.gender,"&status=").concat(s.status,"&minchapter=").concat(s.minchapter,"&sort=").concat(s.sort,"&page=").concat(c)),method:"GET"}),n.next=19,r.requestManager.schedule(b,1);case 19:return y=n.sent,x=r.cheerio.load(y.data),w=r.parser.parseSearchResults(x),t=Ut(x)?void 0:{page:c+1},n.abrupt("return",createPagedResults({results:w,metadata:t}));case 24:case"end":return n.stop()}}),n)})))()},n.getHomePageSections=function(e){var t=this;return _t(a().mark((function r(){var n,i,o,u,c,s,l,p,f,h;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=createHomeSection({id:"featured",title:"Truy\u1ec7n \u0110\u1ec1 C\u1eed",type:d.HomeSectionType.featured}),i=createHomeSection({id:"viewest",title:"Truy\u1ec7n Xem Nhi\u1ec1u Nh\u1ea5t",view_more:!0}),o=createHomeSection({id:"hot",title:"Truy\u1ec7n Hot Nh\u1ea5t",view_more:!0}),u=createHomeSection({id:"new_updated",title:"Truy\u1ec7n M\u1edbi C\u1eadp Nh\u1eadt",view_more:!0}),c=createHomeSection({id:"new_added",title:"Truy\u1ec7n M\u1edbi Th\xeam G\u1ea7n \u0110\xe2y",view_more:!0}),s=createHomeSection({id:"full",title:"Truy\u1ec7n \u0110\xe3 Ho\xe0n Th\xe0nh",view_more:!0}),e(n),e(i),e(o),e(u),e(c),e(s),l="".concat(Bt),p=createRequestObject({url:l,method:"GET"}),r.next=16,t.requestManager.schedule(p,1);case 16:return f=r.sent,h=t.cheerio.load(f.data),n.items=t.parser.parseFeaturedSection(h),e(n),l="".concat(Bt,"tim-truyen?status=-1&sort=10"),p=createRequestObject({url:l,method:"GET"}),r.next=24,t.requestManager.schedule(p,1);case 24:return f=r.sent,h=t.cheerio.load(f.data),i.items=t.parser.parsePopularSection(h),e(i),l="".concat(Bt,"hot"),p=createRequestObject({url:l,method:"GET"}),r.next=32,t.requestManager.schedule(p,1);case 32:return f=r.sent,h=t.cheerio.load(f.data),o.items=t.parser.parseHotSection(h),e(o),l="".concat(Bt),p=createRequestObject({url:l,method:"GET"}),r.next=40,t.requestManager.schedule(p,1);case 40:return f=r.sent,h=t.cheerio.load(f.data),u.items=t.parser.parseNewUpdatedSection(h),e(u),l="".concat(Bt,"tim-truyen?status=-1&sort=15"),p=createRequestObject({url:l,method:"GET"}),r.next=48,t.requestManager.schedule(p,1);case 48:return f=r.sent,h=t.cheerio.load(f.data),c.items=t.parser.parseNewAddedSection(h),e(c),l="".concat(Bt,"truyen-full"),p=createRequestObject({url:l,method:"GET"}),r.next=56,t.requestManager.schedule(p,1);case 56:f=r.sent,h=t.cheerio.load(f.data),s.items=t.parser.parseFullSection(h),e(s);case 60:case"end":return r.stop()}}),r)})))()},n.getViewMoreItems=function(e,t){var r=this;return _t(a().mark((function n(){var i,o,u,c,s,l,d,p;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=null!==(i=null===t||void 0===t?void 0:t.page)&&void 0!==i?i:1,u="",c="",n.t0=e,n.next="viewest"===n.t0?7:"hot"===n.t0?10:"new_updated"===n.t0?13:"new_added"===n.t0?16:"full"===n.t0?19:22;break;case 7:return u="?status=-1&sort=10&page=".concat(o),c="".concat(Bt,"tim-truyen"),n.abrupt("break",23);case 10:return u="?page=".concat(o),c="".concat(Bt,"hot"),n.abrupt("break",23);case 13:return u="?page=".concat(o),c=Bt,n.abrupt("break",23);case 16:return u="?status=-1&sort=15&page=".concat(o),c="".concat(Bt,"tim-truyen"),n.abrupt("break",23);case 19:return u="?page=".concat(o),c="".concat(Bt,"truyen-full"),n.abrupt("break",23);case 22:throw new Error("Requested to getViewMoreItems for a section ID which doesn't exist");case 23:return s=createRequestObject({url:c,method:"GET",param:u}),n.next=26,r.requestManager.schedule(s,1);case 26:return l=n.sent,d=r.cheerio.load(l.data),p=r.parser.parseViewMoreItems(d),t=Ut(d)?void 0:{page:o+1},n.abrupt("return",createPagedResults({results:p,metadata:t}));case 31:case"end":return n.stop()}}),n)})))()},n.getSearchTags=function(){var e=this;return _t(a().mark((function t(){var r,n,i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(Bt,"tim-truyen-nang-cao"),n=createRequestObject({url:r,method:"GET"}),t.next=4,e.requestManager.schedule(n,1);case 4:return i=t.sent,o=e.cheerio.load(i.data),t.abrupt("return",e.parser.parseTags(o));case 7:case"end":return t.stop()}}),t)})))()},n.filterUpdatedManga=function(e,t,r){var n=this;return _t(a().mark((function i(){var o,u,c,s,l,d,p,f,h,m,v,g,b,y,x,w;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=[],u=10,c=1;case 3:if(!(c<u+1)){a.next=29;break}return s=createRequestObject({url:Bt+"?page="+c,method:"GET"}),a.next=7,n.requestManager.schedule(s,1);case 7:for(l=a.sent,d=n.cheerio.load(l.data),p=!0,f=!1,h=void 0,a.prev=10,m=d("div.item","div.row").toArray()[Symbol.iterator]();!(p=(v=m.next()).done);p=!0)g=v.value,y=null===(b=d("figure.clearfix > div.image > a",g).attr("href"))||void 0===b?void 0:b.split("/").pop(),x=d("figure.clearfix > figcaption > ul > li.chapter:nth-of-type(1) > i",g).last().text().trim(),o.push({id:y,time:x});a.next=18;break;case 14:a.prev=14,a.t0=a.catch(10),f=!0,h=a.t0;case 18:a.prev=18,a.prev=19,p||null==m.return||m.return();case 21:if(a.prev=21,!f){a.next=24;break}throw h;case 24:return a.finish(21);case 25:return a.finish(18);case 26:c++,a.next=3;break;case 29:w=n.parser.parseUpdatedManga(o,t,r),e(createMangaUpdates(w));case 31:case"end":return a.stop()}}),i,null,[[10,14,18,26],[19,,21,25]])})))()},r}(y));function Ht(e,t,r,n,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void r(s)}u.done?t(c):Promise.resolve(c).then(n,a)}function Qt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Ht(i,n,a,o,u,"next",e)}function u(e){Ht(i,n,a,o,u,"throw",e)}o(void 0)}))}}function Ft(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Ft(e,t,r[t])}))}return e}var Xt=r.g;Xt.createRequestManager=function(e){var t=(0,c.v8)(u().create());t.interceptors.request.use((function(t){var r;return null===(r=e.interceptor)||void 0===r||r.interceptRequest(t).then((function(e){return Promise.resolve(e)})),t}),(function(e){return Promise.reject(e)})),t.interceptors.request.use((function(e){var t,r,n;(null===(t=e.url)||void 0===t?void 0:t.includes("nhentai.net"))&&(e.url="".concat("https://services.f-ck.me","/v1/cors/").concat((n=e.url+(null!==(r=e.params)&&void 0!==r?r:""),s.from(n).toString("base64").replace(/\+/g,"-").replace(/\//g,"_")),"?source=proxy_cubari_moe"));return e.headers=Vt({},e.headers),e.headers["x-requested-with"]="cubari",e.cache={ttl:3600},e}));var r=Vt({},e,{schedule:function(){var e=Qt(a().mark((function e(r,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.request(r));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()});return r},Xt.createSourceStateManager=function(e){Xt.sourceStateManager={enabled_homepage_sections:["popular"]};var t=function(){var e=Qt(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Xt.sourceStateManager[t]=r;case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),r=function(){var e=Qt(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xt.sourceStateManager[t]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=Vt({},e,{keychain:{store:t,retrieve:r},store:t,retrieve:function(){var e=Qt(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:return n=e.sent,e.abrupt("return",null!==n&&void 0!==n?n:null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return n},Xt.createHomeSection=function(e){return e},Xt.createRequestObject=function(e){return e},Xt.createCookie=function(e){return e},Xt.createTag=function(e){return e},Xt.createTagSection=function(e){return e},Xt.createChapter=function(e){return e},Xt.createMangaTile=function(e){return e},Xt.createIconText=function(e){return e},Xt.createManga=function(e){return e},Xt.createMangaInfo=function(e){return e},Xt.createPagedResults=function(e){return e},Xt.createChapterDetails=function(e){return e};var Jt={blogtruyen:new U(i.ZP),mangadex:new Fe(i.ZP),nhentai:new Pt(i.ZP),nettruyen:new Gt(i.ZP)}}}]);